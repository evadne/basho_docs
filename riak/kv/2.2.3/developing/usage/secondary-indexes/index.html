<!DOCTYPE html>







<html class="no-js" lang="en">




<head>

  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width">
  <link rel="shortcut icon" href="//evadne.github.io/basho_docs/images/branding/favicon.ico" type="image/x-icon" />

  <title>Using Secondary Indexes (2i)</title>

  <link href="//evadne.github.io/basho_docs/css/main.css" media="screen" rel="stylesheet" type="text/css">
  <link rel="canonical" href="//evadne.github.io/basho_docs/riak/kv/latest/developing/usage/secondary-indexes/" />
  <!-- The below meta tags are included to allow JS code to use variables
       defined in Hugo---our static site generator. -->
  <meta name="project" content="riak_kv">
  <meta name="version" content="2.2.3">
  <meta name="project_relative_path" content="developing/usage/secondary-indexes/">

</head>



<body class="riak_kv 2.2.3 latest ">


  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T9C8MK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-T9C8MK');</script>


  
<header class="banner">



  
  <div class="float-right   banner__menu-bars   [bs] hidden-md-up">
    <div class="menu-bars   js_toggle-content-nav"></div>
  </div>



  
  <div class="float-left   banner__docs-logo">
    <a href="//evadne.github.io/basho_docs/index.html" class="block   docs-logo"><img class="docs-logo__image" src="//evadne.github.io/basho_docs/images/branding/basho_docs_logo.png"></a>
  </div>



  
  <div class="overflow-hidden   banner__navigation-pane   [bs] hidden-sm-down">


    
    <div class="float-left    banner__intra-brand__width-wrapper">
    <div class="float-right   banner__intra-brand">
      <div class="float-right">
        
        <a class="inline-block   banner__brand-link" href="http://basho.com/">Basho</a><a class="inline-block   banner__brand-link" href="https://academy.basho.com">Academy</a><a class="inline-block   banner__brand-link" href="//evadne.github.io/basho_docs/community">Community</a><a class="inline-block   banner__brand-link" href="http://basho.com/contact">Contact</a></div>
    </div>
    </div>




    
    <div class="float-left    banner__intra-site__width-wrapper">
    <div class="float-right   banner__intra-site">
      
      <a class="inline-block   banner__brand-link banner__brand-link--current">Riak KV</a><a class="inline-block   banner__brand-link " href="//evadne.github.io/basho_docs/riak/ts/latest/">Riak TS</a><a class="inline-block   banner__brand-link " href="//evadne.github.io/basho_docs/riak/cs/latest/">Riak CS</a></div>
    </div>


  </div>

</header>



  
  



<nav class="content-nav content-nav--top-size-full">




  <div class="content-nav__fixed-top">
    <form id="searchbox_011972015458788978446:zgdcy4fa-o0" class="search" action="">

      <span class="block float-left   search__icon-container   docs-icon--search">|</span>

      <span class="block overflow">
        <input class="search__input" id="main-search" type="search" name="q" placeholder="Search">
      </span>

    </form>


    <div class="clearfix   version-picker">

  
      <a class="inline-block float-left    product__title" href="//evadne.github.io/basho_docs/"><img class="product__logo" src="//evadne.github.io/basho_docs/images/branding/riak-logo.png">Riak<span class="product__title-highlight">KV</span>
      </a>
  

      <div class="inline-block float-right   selector selector--version">
        <header class="selector__title">Versions</header>
        <button class="selector__btn" type="button">2.2.3</button>
        <div    class="selector__arrow"></div>
      </div>

    </div>


  </div>


  
  <div class="overflow-y-hidden   selector-pane__sizing-box selector-pane__sizing-box--hidden">
  <div class="                    selector-pane__shadow-box">

    
    <div class="edge-fader edge-fader--left">
      <span class="inline-block   edge-fader__arrow edge-fader__arrow--invisible"></span>
    </div>
    <div class="edge-fader edge-fader--right">
      <span class="inline-block   edge-fader__arrow edge-fader__arrow--invisible"></span>
    </div>

    <div class="overflow-x        selector-pane__primary selector-pane--versions  js_edge-fader--target">
      
    </div>
  </div>
  </div>




  
  <div class="             content-nav__primary__sizing-box">
  <div class="             content-nav__primary__shadow-box">
  <div class="overflow-y   content-nav__primary">

    <div class="content-nav__menu-container">

      <ul class="content-menu
                 content-menu--depth-0
                 content-menu--open">


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--riak">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/" >
              <span class="block   content-menu__item__right-border"><strong>Riak KV</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/release-notes/" >
        <span class="block   content-menu__item__right-border">Release Notes</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li class="content-menu__download-entry">

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--download-alt">|</span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/downloads/" >
              <span class="block   content-menu__item__right-border"><strong>Download Riak KV</strong></span>
            </a>

          </div>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--install">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/" >
              <span class="block   content-menu__item__right-border"><strong>Setup</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/" >
        <span class="block   content-menu__item__right-border">Planning</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/start/" >
        <span class="block   content-menu__item__right-border">Start Planning</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/operating-system/" >
        <span class="block   content-menu__item__right-border">OS Support</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/" >
        <span class="block   content-menu__item__right-border">Choosing a Backend</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/bitcask/" >
        <span class="block   content-menu__item__right-border">Bitcask</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/leveldb/" >
        <span class="block   content-menu__item__right-border">LevelDB</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/memory/" >
        <span class="block   content-menu__item__right-border">Memory</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/multi/" >
        <span class="block   content-menu__item__right-border">Multi-backend</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/cluster-capacity/" >
        <span class="block   content-menu__item__right-border">Cluster Capacity</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/bitcask-capacity-calc/" >
        <span class="block   content-menu__item__right-border">Bitcask Capacity Calculator</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/best-practices/" >
        <span class="block   content-menu__item__right-border">Best Practices</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/" >
        <span class="block   content-menu__item__right-border">Installing</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/amazon-web-services/" >
        <span class="block   content-menu__item__right-border">Amazon Web Services</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/debian-ubuntu/" >
        <span class="block   content-menu__item__right-border">Debian &amp; Ubuntu</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/freebsd/" >
        <span class="block   content-menu__item__right-border">FreeBSD</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/mac-osx/" >
        <span class="block   content-menu__item__right-border">Mac OS X</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/rhel-centos/" >
        <span class="block   content-menu__item__right-border">RHEL &amp; CentOS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/smartos/" >
        <span class="block   content-menu__item__right-border">SmartOS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/solaris/" >
        <span class="block   content-menu__item__right-border">Solaris</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/suse/" >
        <span class="block   content-menu__item__right-border">SUSE</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/windows-azure/" >
        <span class="block   content-menu__item__right-border">Windows Azure</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/source/" >
        <span class="block   content-menu__item__right-border">Installing From Source</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/source/erlang/" >
        <span class="block   content-menu__item__right-border">Installing Erlang</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/source/jvm/" >
        <span class="block   content-menu__item__right-border">Installing the JVM</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/installing/verify/" >
        <span class="block   content-menu__item__right-border">Verifying an Installation</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/upgrading/" >
        <span class="block   content-menu__item__right-border">Upgrading</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/upgrading/checklist/" >
        <span class="block   content-menu__item__right-border">Production Checklist</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/upgrading/version/" >
        <span class="block   content-menu__item__right-border">Upgrading to 2.2.3</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/downgrade/" >
        <span class="block   content-menu__item__right-border">Downgrading</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--cog">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/" >
              <span class="block   content-menu__item__right-border"><strong>Configuring</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/basic/" >
        <span class="block   content-menu__item__right-border">Basic Configuration</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/backend/" >
        <span class="block   content-menu__item__right-border">Backend Configuration</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/managing/" >
        <span class="block   content-menu__item__right-border">Managing Configuration</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/reference/" >
        <span class="block   content-menu__item__right-border">Configuration Reference</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/load-balancing-proxy/" >
        <span class="block   content-menu__item__right-border">Load Balancing &amp; Proxy</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/search/" >
        <span class="block   content-menu__item__right-border">Riak Search Settings</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/mapreduce/" >
        <span class="block   content-menu__item__right-border">MapReduce Settings</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/global-object-expiration/" >
        <span class="block   content-menu__item__right-border">Global Object Expiration</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/strong-consistency/" >
        <span class="block   content-menu__item__right-border">Implementing Strong Consistency</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v3-multi-datacenter/" >
        <span class="block   content-menu__item__right-border">V3 Multi-Datacenter</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v3-multi-datacenter/quick-start/" >
        <span class="block   content-menu__item__right-border">Quickstart</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v3-multi-datacenter/nat/" >
        <span class="block   content-menu__item__right-border">With NAT</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v3-multi-datacenter/ssl/" >
        <span class="block   content-menu__item__right-border">SSL</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v2-multi-datacenter/" >
        <span class="block   content-menu__item__right-border">V2 Multi-Datacenter</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v2-multi-datacenter/quick-start/" >
        <span class="block   content-menu__item__right-border">Quickstart</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v2-multi-datacenter/nat/" >
        <span class="block   content-menu__item__right-border">With NAT</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/configuring/v2-multi-datacenter/ssl/" >
        <span class="block   content-menu__item__right-border">SSL</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--database">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/" >
              <span class="block   content-menu__item__right-border"><strong>Using</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/running-a-cluster/" >
        <span class="block   content-menu__item__right-border">Running a Cluster</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/admin/" >
        <span class="block   content-menu__item__right-border">Cluster Administration</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/admin/commands/" >
        <span class="block   content-menu__item__right-border">Cluster Admin Commands</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/admin/riak-admin/" >
        <span class="block   content-menu__item__right-border">riak-admin CLI</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/admin/riak-cli/" >
        <span class="block   content-menu__item__right-border">riak CLI</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/admin/riak-control/" >
        <span class="block   content-menu__item__right-border">Riak Control</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/" >
        <span class="block   content-menu__item__right-border">Cluster Operations</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/adding-removing-nodes/" >
        <span class="block   content-menu__item__right-border">Adding/Removing Nodes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/changing-cluster-info/" >
        <span class="block   content-menu__item__right-border">Changing Cluster Info</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/replacing-node/" >
        <span class="block   content-menu__item__right-border">Replacing a Node</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/inspecting-node/" >
        <span class="block   content-menu__item__right-border">Inspecting a Node</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/bucket-types/" >
        <span class="block   content-menu__item__right-border">Bucket Types</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/logging/" >
        <span class="block   content-menu__item__right-border">Logging</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/backing-up/" >
        <span class="block   content-menu__item__right-border">Backing Up</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/handoff/" >
        <span class="block   content-menu__item__right-border">Handoff</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/strong-consistency/" >
        <span class="block   content-menu__item__right-border">Monitoring Strong Consistency</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/active-anti-entropy/" >
        <span class="block   content-menu__item__right-border">Managing Active Anti-Entropy</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/v3-multi-datacenter/" >
        <span class="block   content-menu__item__right-border">V3 Multi-Datacenter</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/cluster-operations/v2-multi-datacenter/" >
        <span class="block   content-menu__item__right-border">V2 Multi-Datacenter</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/" >
        <span class="block   content-menu__item__right-border">Repair &amp; Recovery</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/failure-recovery/" >
        <span class="block   content-menu__item__right-border">Failure &amp; Recovery</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/errors/" >
        <span class="block   content-menu__item__right-border">Errors</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/repairs/" >
        <span class="block   content-menu__item__right-border">Repairs</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/rolling-restart/" >
        <span class="block   content-menu__item__right-border">Rolling Restarts</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/failed-node/" >
        <span class="block   content-menu__item__right-border">Recover a Failed Node</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/secondary-indexes/" >
        <span class="block   content-menu__item__right-border">Repair Secondary Indexes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/repair-recovery/rolling-replaces/" >
        <span class="block   content-menu__item__right-border">Rolling Replaces</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/security/" >
        <span class="block   content-menu__item__right-border">Security</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/security/basics/" >
        <span class="block   content-menu__item__right-border">Security Basics</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/security/managing-sources/" >
        <span class="block   content-menu__item__right-border">Managing Security Sources</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/" >
        <span class="block   content-menu__item__right-border">Performance</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/benchmarking/" >
        <span class="block   content-menu__item__right-border">Benchmarking</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/open-files-limit/" >
        <span class="block   content-menu__item__right-border">Open Files Limit</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/v2-scheduling-fullsync/" >
        <span class="block   content-menu__item__right-border">V2 Scheduling Fullsync</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/latency-reduction/" >
        <span class="block   content-menu__item__right-border">Latency Reduction</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/erlang/" >
        <span class="block   content-menu__item__right-border">Erlang VM</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/amazon-web-services/" >
        <span class="block   content-menu__item__right-border">Amazon Web Services</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/performance/multi-datacenter-tuning/" >
        <span class="block   content-menu__item__right-border">Multi-Datacenter Replication</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/troubleshooting/" >
        <span class="block   content-menu__item__right-border">Troubleshooting</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/troubleshooting/http-204/" >
        <span class="block   content-menu__item__right-border">HTTP 204</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/" >
        <span class="block   content-menu__item__right-border">Reference</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/logging/" >
        <span class="block   content-menu__item__right-border">Logging</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/handoff/" >
        <span class="block   content-menu__item__right-border">Handoff</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/bucket-types/" >
        <span class="block   content-menu__item__right-border">Bucket Types</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/object-deletion/" >
        <span class="block   content-menu__item__right-border">Object Deletion</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/runtime-interaction/" >
        <span class="block   content-menu__item__right-border">Runtime Interaction</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/statistics-monitoring/" >
        <span class="block   content-menu__item__right-border">Monitoring</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/snmp/" >
        <span class="block   content-menu__item__right-border">SNMP</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/jmx/" >
        <span class="block   content-menu__item__right-border">JMX Monitoring</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/search/" >
        <span class="block   content-menu__item__right-border">Search</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/secondary-indexes/" >
        <span class="block   content-menu__item__right-border">Secondary Indexes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/custom-code/" >
        <span class="block   content-menu__item__right-border">Installing Custom Code</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/strong-consistency/" >
        <span class="block   content-menu__item__right-border">Strong Consistency</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/multi-datacenter/" >
        <span class="block   content-menu__item__right-border">Multi-Datacenter</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/multi-datacenter/statistics/" >
        <span class="block   content-menu__item__right-border">Statistics</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/multi-datacenter/per-bucket-replication/" >
        <span class="block   content-menu__item__right-border">Per Bucket</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/multi-datacenter/monitoring/" >
        <span class="block   content-menu__item__right-border">Monitoring</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/multi-datacenter/comparison/" >
        <span class="block   content-menu__item__right-border">Comparison</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v3-multi-datacenter/" >
        <span class="block   content-menu__item__right-border">V3 Replication</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v3-multi-datacenter/architecture/" >
        <span class="block   content-menu__item__right-border">Architecture</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v3-multi-datacenter/aae/" >
        <span class="block   content-menu__item__right-border">Active Anti-Entropy</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v3-multi-datacenter/cascading-writes/" >
        <span class="block   content-menu__item__right-border">Cascading Writes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v3-multi-datacenter/scheduling-fullsync/" >
        <span class="block   content-menu__item__right-border">Scheduling Fullsync</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v2-multi-datacenter/" >
        <span class="block   content-menu__item__right-border">V2 Replication</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v2-multi-datacenter/architecture/" >
        <span class="block   content-menu__item__right-border">Architecture</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/v2-multi-datacenter/scheduling-fullsync/" >
        <span class="block   content-menu__item__right-border">Scheduling Fullsync</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--lambda">|</span>
            <span class="block float-right   content-menu__menu-toggle
                         content-menu__menu-toggle--open ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/" >
              <span class="block   content-menu__item__right-border"><strong>Developing</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           content-menu--open"
    style="display: block">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/" >
        <span class="block   content-menu__item__right-border">Getting Started</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/java/" >
        <span class="block   content-menu__item__right-border">Java</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/java/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/java/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/java/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/ruby/" >
        <span class="block   content-menu__item__right-border">Ruby</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/ruby/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/ruby/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/ruby/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/python/" >
        <span class="block   content-menu__item__right-border">Python</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/python/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/python/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/python/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/csharp/" >
        <span class="block   content-menu__item__right-border">C Sharp</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/csharp/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/csharp/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/csharp/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/nodejs/" >
        <span class="block   content-menu__item__right-border">NodeJS</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/nodejs/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/nodejs/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/nodejs/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/erlang/" >
        <span class="block   content-menu__item__right-border">Erlang</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/erlang/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/erlang/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/erlang/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/golang/" >
        <span class="block   content-menu__item__right-border">Go</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/golang/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/golang/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/golang/object-modeling/" >
        <span class="block   content-menu__item__right-border">Object Modeling</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/php/" >
        <span class="block   content-menu__item__right-border">PHP</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/php/crud-operations/" >
        <span class="block   content-menu__item__right-border">CRUD Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started/php/querying/" >
        <span class="block   content-menu__item__right-border">Querying</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                   content-menu__menu-toggle--open ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/" >
        <span class="block   content-menu__item__right-border">Usage</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           content-menu--open"
    style="display: block">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/creating-objects/" >
        <span class="block   content-menu__item__right-border">Creating Objects</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/reading-objects/" >
        <span class="block   content-menu__item__right-border">Reading Objects</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/updating-objects/" >
        <span class="block   content-menu__item__right-border">Updating Objects</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/deleting-objects/" >
        <span class="block   content-menu__item__right-border">Deleting Objects</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/content-types/" >
        <span class="block   content-menu__item__right-border">Content Types</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/search/" >
        <span class="block   content-menu__item__right-border">Searching</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/mapreduce/" >
        <span class="block   content-menu__item__right-border">Using MapReduce</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item  content-menu__item--selected ">

      <a class="block overflow   content-menu__link--depth-2" >
        <span class="block   content-menu__item__right-border">Using Secondary Indexes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/bucket-types/" >
        <span class="block   content-menu__item__right-border">Bucket Types</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/commit-hooks/" >
        <span class="block   content-menu__item__right-border">Using Commit Hooks</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/search-schemas/" >
        <span class="block   content-menu__item__right-border">Creating Search Schemas</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/searching-data-types/" >
        <span class="block   content-menu__item__right-border">Searching with Data Types</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/document-store/" >
        <span class="block   content-menu__item__right-border">Implementing a Document Store</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/custom-extractors/" >
        <span class="block   content-menu__item__right-border">Custom Extractors</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/security/" >
        <span class="block   content-menu__item__right-border">Security</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/security/java/" >
        <span class="block   content-menu__item__right-border">Java</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/security/ruby/" >
        <span class="block   content-menu__item__right-border">Ruby</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/security/python/" >
        <span class="block   content-menu__item__right-border">Python</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/security/erlang/" >
        <span class="block   content-menu__item__right-border">Erlang</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/security/php/" >
        <span class="block   content-menu__item__right-border">PHP</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/replication/" >
        <span class="block   content-menu__item__right-border">Replication</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/" >
        <span class="block   content-menu__item__right-border">Conflict Resolution</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/java/" >
        <span class="block   content-menu__item__right-border">Java</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/ruby/" >
        <span class="block   content-menu__item__right-border">Ruby</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/python/" >
        <span class="block   content-menu__item__right-border">Python</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/csharp/" >
        <span class="block   content-menu__item__right-border">C Sharp</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/nodejs/" >
        <span class="block   content-menu__item__right-border">NodeJS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/php/" >
        <span class="block   content-menu__item__right-border">PHP</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/conflict-resolution/golang/" >
        <span class="block   content-menu__item__right-border">Go</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/data-types/" >
        <span class="block   content-menu__item__right-border">Data Types</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/data-types/counters/" >
        <span class="block   content-menu__item__right-border">Counters</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/data-types/hyperloglogs/" >
        <span class="block   content-menu__item__right-border">HyperLogLogs</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/data-types/sets/" >
        <span class="block   content-menu__item__right-border">Sets</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/data-types/maps/" >
        <span class="block   content-menu__item__right-border">Maps</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/key-value-modeling/" >
        <span class="block   content-menu__item__right-border">Key/Value Modeling</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/" >
        <span class="block   content-menu__item__right-border">Application Guide</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/replication-properties/" >
        <span class="block   content-menu__item__right-border">Replication Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/strong-consistency/" >
        <span class="block   content-menu__item__right-border">Strong Consistency</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/write-once/" >
        <span class="block   content-menu__item__right-border">Write Once</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/advanced-mapreduce/" >
        <span class="block   content-menu__item__right-border">Advanced MapReduce</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/cluster-metadata/" >
        <span class="block   content-menu__item__right-border">Cluster Metadata</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/client-libraries/" >
        <span class="block   content-menu__item__right-border">Client Libraries</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/" >
        <span class="block   content-menu__item__right-border">APIs</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/repl-hooks/" >
        <span class="block   content-menu__item__right-border">Multi-Datacenter REPL Hooks API</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/backend/" >
        <span class="block   content-menu__item__right-border">Backend API</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/" >
        <span class="block   content-menu__item__right-border">HTTP API</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/get-bucket-props/" >
        <span class="block   content-menu__item__right-border">Get Bucket Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/set-bucket-props/" >
        <span class="block   content-menu__item__right-border">Set Bucket Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/reset-bucket-props/" >
        <span class="block   content-menu__item__right-border">Reset Bucket Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/list-buckets/" >
        <span class="block   content-menu__item__right-border">List Buckets</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/list-keys/" >
        <span class="block   content-menu__item__right-border">List Keys</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/fetch-object/" >
        <span class="block   content-menu__item__right-border">Fetch Object</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/store-object/" >
        <span class="block   content-menu__item__right-border">Store Object</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/delete-object/" >
        <span class="block   content-menu__item__right-border">Delete Object</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/mapreduce/" >
        <span class="block   content-menu__item__right-border">MapReduce</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/secondary-indexes/" >
        <span class="block   content-menu__item__right-border">Secondary Indexes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/ping/" >
        <span class="block   content-menu__item__right-border">Ping</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/status/" >
        <span class="block   content-menu__item__right-border">Status</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/list-resources/" >
        <span class="block   content-menu__item__right-border">List Resources</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/search-query/" >
        <span class="block   content-menu__item__right-border">Search Query</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/search-index-info/" >
        <span class="block   content-menu__item__right-border">Search Index Info</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/fetch-search-index/" >
        <span class="block   content-menu__item__right-border">Fetch Search Index</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/store-search-index/" >
        <span class="block   content-menu__item__right-border">Store Search Index</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/delete-search-index/" >
        <span class="block   content-menu__item__right-border">Delete Search Index</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/fetch-search-schema/" >
        <span class="block   content-menu__item__right-border">Fetch Search Schema</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/store-search-schema/" >
        <span class="block   content-menu__item__right-border">Store Search Schema</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/counters/" >
        <span class="block   content-menu__item__right-border">Counters</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/http/link-walking/" >
        <span class="block   content-menu__item__right-border">Link Walking</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/" >
        <span class="block   content-menu__item__right-border">Protocol Buffers API</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/list-buckets/" >
        <span class="block   content-menu__item__right-border">List Buckets</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/list-keys/" >
        <span class="block   content-menu__item__right-border">List Keys</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/get-bucket-props/" >
        <span class="block   content-menu__item__right-border">Get Bucket Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/set-bucket-props/" >
        <span class="block   content-menu__item__right-border">Set Bucket Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/reset-bucket-props/" >
        <span class="block   content-menu__item__right-border">Reset Bucket Properties</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/fetch-object/" >
        <span class="block   content-menu__item__right-border">Fetch Object</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/store-object/" >
        <span class="block   content-menu__item__right-border">Store Object</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/delete-object/" >
        <span class="block   content-menu__item__right-border">Delete Object</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/mapreduce/" >
        <span class="block   content-menu__item__right-border">MapReduce</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/secondary-indexes/" >
        <span class="block   content-menu__item__right-border">Secondary Indexes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/search/" >
        <span class="block   content-menu__item__right-border">Search</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/ping/" >
        <span class="block   content-menu__item__right-border">Ping</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/server-info/" >
        <span class="block   content-menu__item__right-border">Server Info</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/get-bucket-type/" >
        <span class="block   content-menu__item__right-border">Get Bucket Type</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/set-bucket-type/" >
        <span class="block   content-menu__item__right-border">Set Bucket Type</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/dt-fetch/" >
        <span class="block   content-menu__item__right-border">Data Type Fetch</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/dt-union/" >
        <span class="block   content-menu__item__right-border">Data Type Union</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/dt-store/" >
        <span class="block   content-menu__item__right-border">Data Type Store</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/dt-counter-store/" >
        <span class="block   content-menu__item__right-border">Data Type Counter Store</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/dt-set-store/" >
        <span class="block   content-menu__item__right-border">Data Type Set Store</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/dt-map-store/" >
        <span class="block   content-menu__item__right-border">Data Type Map Store</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/yz-index-get/" >
        <span class="block   content-menu__item__right-border">Yokozuna Index Get</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/yz-index-put/" >
        <span class="block   content-menu__item__right-border">Yokozuna Index Put</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/yz-index-delete/" >
        <span class="block   content-menu__item__right-border">Yokozuna Index Delete</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/yz-schema-get/" >
        <span class="block   content-menu__item__right-border">Yokozuna Schema Get</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/yz-schema-put/" >
        <span class="block   content-menu__item__right-border">Yokozuna Schema Put</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/auth-req/" >
        <span class="block   content-menu__item__right-border">Auth Request</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/set-client-id/" >
        <span class="block   content-menu__item__right-border">Set Client ID</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/api/protocol-buffers/get-client-id/" >
        <span class="block   content-menu__item__right-border">Get Client ID</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/faq/" >
        <span class="block   content-menu__item__right-border">Developing FAQ</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--tools">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/" >
              <span class="block   content-menu__item__right-border"><strong>Add-ons</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/redis/" >
        <span class="block   content-menu__item__right-border">Redis Add-on</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/redis/set-up-rra/" >
        <span class="block   content-menu__item__right-border">Set Up Redis Add-on</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/redis/set-up-rra/deployment-models/" >
        <span class="block   content-menu__item__right-border">Redis Add-on Deployment Models</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/redis/using-rra/" >
        <span class="block   content-menu__item__right-border">Using Redis Addon</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/redis/developing-rra/" >
        <span class="block   content-menu__item__right-border">Develop with Redis Add-on</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/add-ons/redis/redis-add-on-features/" >
        <span class="block   content-menu__item__right-border">Redis Add-on Features</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--beaker">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/" >
              <span class="block   content-menu__item__right-border"><strong>Learning</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/why-riak-kv/" >
        <span class="block   content-menu__item__right-border">Why Riak KV?</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/use-cases/" >
        <span class="block   content-menu__item__right-border">Use Cases</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/glossary/" >
        <span class="block   content-menu__item__right-border">Riak KV Glossary</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/" >
        <span class="block   content-menu__item__right-border">Concepts</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/active-anti-entropy/" >
        <span class="block   content-menu__item__right-border">Active Anti-Entropy</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/buckets/" >
        <span class="block   content-menu__item__right-border">Buckets</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/capability-negotiation/" >
        <span class="block   content-menu__item__right-border">Capability Negotiation</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/causal-context/" >
        <span class="block   content-menu__item__right-border">Causal Context</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/clusters/" >
        <span class="block   content-menu__item__right-border">Clusters</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/crdts/" >
        <span class="block   content-menu__item__right-border">Data Types</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/eventual-consistency/" >
        <span class="block   content-menu__item__right-border">Eventual Consistency</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/keys-and-objects/" >
        <span class="block   content-menu__item__right-border">Keys and Objects</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/replication/" >
        <span class="block   content-menu__item__right-border">Replication</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/strong-consistency/" >
        <span class="block   content-menu__item__right-border">Strong Consistency</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/concepts/vnodes/" >
        <span class="block   content-menu__item__right-border">Vnodes</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/dynamo/" >
        <span class="block   content-menu__item__right-border">Dynamo</span>
      </a>

    </div>

  </li>



</ul>

        </li>

        <li class="content-menu__blank-entry"></li>

      </ul>

    </div>



    <div class="content-nav__fixed-bottom">

      <ul class="content-menu">

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--comments">|</span>

            <a class="block overflow" href="//evadne.github.io/basho_docs/community">
              <span class="block   content-menu__item__right-border">
                <sub>Want some extra help?</sub><br>
                <strong>Ask our Community</strong>
              </span>
            </a>

          </div>
        </li>

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--question-sign">|</span>

            <a class="block overflow" href="http://basho.com/contact">
              <span class="block   content-menu__item__right-border">
                <sub>Need to chat?</sub><br>
                <strong>Contact us directly</strong>
              </span>
            </a>

          </div>
        </li>

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--github-alt">|</span>

            <a class="block overflow" href="https://github.com/basho/basho_docs/edit/master/content/riak/kv/2.2.3/developing/usage/secondary-indexes.md">
              <span class="block   content-menu__item__right-border">
                <sub>Noticed a typo?</sub><br>
                <strong>Correct it in GitHub</strong>
              </span>
            </a>

          </div>
        </li>

      </ul>

    </div>

  </div>
  </div>
  </div>



</nav>

<script>
  (function() {
    var cx = '011972015458788978446:zgdcy4fa-o0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div style="width:0px;overflow:hidden;height:0px;">
  <gcse:search></gcse:search>
</div>






  <div class="content-well">


    <article class="main-article">


      

<header class="front-matter">


  <h1 class="front-matter__title">

    
    <br>
    Using Secondary Indexes (2i)

  </h1>
  <nav class="table-of-contents"></nav>


</header>


      <main>
        

<blockquote>
<p><strong>Note: Riak Search preferred for querying</strong></p>

<p>If you&rsquo;re interested in non-primary-key-based querying in Riak, i.e. if
you&rsquo;re looking to go beyond straightforward K/V operations, we now
recommend <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/search/">Riak Search</a> rather than secondary indexes for
a variety of reasons. Most importantly, Riak Search has a far more
capacious querying API and can be used with all of Riak&rsquo;s storage
backends.</p>
</blockquote>

<p>Secondary indexes (2i) in Riak enable you to tag objects stored in Riak,
at write time, with one or more queryable values. Those values can then
be used to find multiple objects in Riak. If you&rsquo;re storing <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/data-modeling/#user-accounts">user data</a>, for example, you could tag each object
associated with that user with a username or other unique marker. Once
tagged, you could find all objects in a Riak bucket sharing that tag.
Secondary indexes can be either a binary or string, such as
<code>sensor_1_data</code> or <code>admin_user</code> or <code>click_event</code>, or an integer, such as
<code>99</code> or <code>141121</code>.</p>

<p><a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/search/">Riak Search</a> serves analogous purposes but is quite
different because it parses key/value data itself and builds indexes on
the basis of Solr schemas.</p>

<p>Please note that 2i can be used only with the <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/leveldb">LevelDB</a> and <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/memory">Memory</a>
backends.</p>

<h2 id="features">Features</h2>

<ul>
<li>Allows two types of secondary attributes: integers and strings (aka
binaries)</li>
<li>Allows querying by exact match or range on one index</li>
<li>Allows pagination of results</li>
<li>Allows streaming of results</li>
<li>Query results can be used as input to a <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/mapreduce/">MapReduce</a>
query</li>
</ul>

<blockquote>
<p><strong>Note on 2i and strong consistency</strong>
Secondary indexes do not currently work with the <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/strong-consistency">strong consistency</a>
feature introduced in Riak version 2.0. If you store objects in
<a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/strong-consistency/#creating-a-strongly-consistent-bucket-type">strongly consistent buckets</a> and attach
secondary index metadata to those objects, you can still perform
strongly consistent operations on those objects but the secondary
indexes will be ignored.</p>
</blockquote>

<h2 id="when-to-use-secondary-indexes">When to Use Secondary Indexes</h2>

<p>Secondary indexes are useful when you want to find data on the basis of
something other than objects&rsquo; bucket type, bucket, and key, i.e. when
you want objects to be discoverable based on more than their location
alone.</p>

<p>2i works best for objects whose value is stored in an opaque blob, like
a binary file, because those objects don&rsquo;t offer any clues that enable
you to discover them later. Indexing enables you to tag those objects
and find all objects with the same tag in a specified bucket later on.</p>

<p>2i is thus recommended when your use case requires an easy-to-use search
mechanism that does not require a schema (as does <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/using/reference/search/#schemas">Riak Search</a>) and a basic query interface, i.e. an interface that
enables an application to tell Riak things like &ldquo;fetch all objects
tagged with the string <code>Milwaukee_Bucks</code>&rdquo; or &ldquo;fetch all objects tagged
with numbers between 1500 and 1509.&rdquo;</p>

<p>2i is also recommended if your use case requires anti-entropy. Since
secondary indexes are just metadata attached to key/value objects, 2i
piggybacks off of read-repair.</p>

<h2 id="when-not-to-use-secondary-indexes">When Not to Use Secondary Indexes</h2>

<ul>
<li>If your ring size exceeds 512 partitions, 2i can cause performance
issues in large clusters.</li>
<li>When you need more than the exact match and range searches that 2i
supports. If that&rsquo;s the case, we recommend checking out <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/search/">Riak Search</a>.</li>
<li>When you want to use composite queries. A query like
<code>last_name=zezeski AND state=MD</code> would have to be split into two
queries and the results merged (or it would need to involve
<a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/usage/mapreduce/">MapReduce</a>).</li>
</ul>

<h2 id="query-interfaces-and-examples">Query Interfaces and Examples</h2>

<p>Typically, the result set from a 2i query is a list of object keys from
the specified bucket that include the index values in question. As we&rsquo;ll
see below, when executing range queries in Riak 1.4 or higher, it is
possible to retrieve the index values along with the object keys.</p>

<h3 id="inserting-objects-with-secondary-indexes">Inserting Objects with Secondary Indexes</h3>

<p>In this example, the key <code>john_smith</code> is used to store user data in the
bucket <code>users</code>, which bears the <code>default</code> bucket type. Let&rsquo;s say that an
application would like add a Twitter handle and an email address to this
object as secondary indexes.</p>

<pre><code class="language-java">Location johnSmithKey = new Location(new Namespace(&quot;default&quot;, &quot;users&quot;), &quot;john_smith&quot;);

// In the Java client (and all clients), if you do not specify a bucket type,
// the client will use the default type. And so the following store command
// would be equivalent to the one above:
Location johnSmithKey = new Location(new Namespace(&quot;users&quot;), &quot;john_smith&quot;);

RiakObject obj = new RiakObject()
        .setContentType(&quot;application/json&quot;)
        .setValue(BinaryValue.create(&quot;{'user_data':{ ... }}&quot;));

obj.getIndexes().getIndex(StringBinIndex.named(&quot;twitter&quot;)).add(&quot;jsmith123&quot;);
obj.getIndexes().getIndex(StringBinIndex.named(&quot;email&quot;)).add(&quot;jsmith@basho.com&quot;);

StoreValue store = new StoreValue.Builder(obj)
        .withLocation(johnSmithKey)
        .build();
client.execute(store);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('default').bucket('users')
obj = Riak::RObject.new(bucket, 'john_smith')
obj.content_type = 'application/json'
obj.raw_data = '{&quot;user_data&quot;:{ ... }}'

# String/binary indexes must be set as an array of strings
obj.indexes['twitter_bin'] = %w{ jsmith123 }
obj.indexes['email_bin'] = %w{ jsmith@basho.com }
obj.store

# In the Ruby client (and all clients), if you do not specify a bucket
# type, the client will use the default type. And so the following set
# of commands would be equivalent to the one above:

bucket = client.bucket('users')
# repeat the same commands for building the object
obj.store
</code></pre>

<pre><code class="language-php">$object = (new \Basho\Riak\Object('{&quot;user_data&quot;:{ ... }}', ['Content-type' =&gt; 'application/json']))
  -&gt;addValueToIndex('twitter_bin', 'jsmith123')
  -&gt;addValueToIndex('email_bin', 'jsmith@basho.com');

(new \Basho\Riak\Command\Builder\StoreObject($riak))
  -&gt;withObject($object)
  -&gt;buildLocation('john_smith', 'users', 'default')
  -&gt;build()
  -&gt;execute();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('default').bucket('users')
# In the Python client (and all clients), if you do not specify a bucket type,
# the client will use the default type. And so the following store command
# would be equivalent to the one above:
bucket = client.bucket('users')

obj = RiakObject(client, bucket, 'john_smith')
obj.content_type = 'text/plain'
obj.data = '...user data...'
obj.add_index('twitter_bin', 'jsmith123')
obj.add_index('email_bin', 'jsmith@basho.com')
obj.store()
</code></pre>

<pre><code class="language-csharp">var id = new RiakObjectId(&quot;default&quot;, &quot;users&quot;, &quot;john_smith&quot;);
var obj = new RiakObject(id, &quot;...user data...&quot;,
    RiakConstants.ContentTypes.TextPlain);
obj.BinIndex(&quot;twitter&quot;).Set(&quot;jsmith123&quot;);
obj.BinIndex(&quot;email&quot;).Set&quot;jsmith@basho.com&quot;);
var rslt = client.Put(obj);
</code></pre>

<pre><code class="language-javascript">var riakObj = new Riak.Commands.KV.RiakObject();
riakObj.setContentType('text/plain');
riakObj.setBucket('users');
riakObj.setKey('john_smith');
riakObj.setValue('...user data...');
riakObj.addToIndex('twitter_bin', 'jsmith123');
riakObj.addToIndex('email_bin', 'jsmith@basho.com');
client.storeValue({ value: riakObj }, function (err, rslt) {
    if (err) {
        throw new Error(err);
    }
});
</code></pre>

<pre><code class="language-erlang">Obj = riakc_obj:new({&lt;&lt;&quot;default&quot;&gt;&gt;, &lt;&lt;&quot;users&quot;&gt;&gt;},
                    &lt;&lt;&quot;john_smith&quot;&gt;&gt;,
                    &lt;&lt;&quot;...user data...&quot;&gt;&gt;,
                    &lt;&lt;&quot;text/plain&quot;&gt;&gt;),
%% In the Erlang client (and all clients), if you do not specify a bucket type,
%% the client will use the default type. And so the following object would be
%% equivalent to the one above:

Obj = riakc_obj:new(&lt;&lt;&quot;users&quot;&gt;&gt;,
                    &lt;&lt;&quot;john_smith&quot;&gt;&gt;,
                    &lt;&lt;&quot;...user data...&quot;&gt;&gt;,
                    &lt;&lt;&quot;text/plain&quot;&gt;&gt;),
MD1 = riakc_obj:get_update_metadata(Obj),
MD2 = riakc_obj:set_secondary_index(
    MD1,
    [{{binary_index, &quot;twitter&quot;}, [&lt;&lt;&quot;jsmith123&quot;&gt;&gt;]},
     {{binary_index, &quot;email&quot;}, [&lt;&lt;&quot;jsmith@basho.com&quot;&gt;&gt;]}]),
Obj2 = riakc_obj:update_metadata(Obj, MD2),
riakc_pb_socket:put(Pid, Obj2).
</code></pre>

<pre><code class="language-golang">obj := &amp;riak.Object{
    ContentType:     &quot;text/plain&quot;,
    Charset:         &quot;utf-8&quot;,
    ContentEncoding: &quot;utf-8&quot;,
    BucketType:      &quot;indexes&quot;,
    Bucket:          &quot;users&quot;,
    Key:             &quot;john_smith&quot;,
    Value:           []byte(&quot;…user data…&quot;),
}

obj.AddToIndex(&quot;twitter_bin&quot;, &quot;jsmith123&quot;)
obj.AddToIndex(&quot;email_bin&quot;, &quot;jsmith@basho.com&quot;)

cmd, err := riak.NewStoreValueCommandBuilder().
    WithContent(obj).
    Build()
if err != nil {
    return err
}

if err := cluster.Execute(cmd); err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl -XPOST localhost:8098/types/default/buckets/users/keys/john_smith \
  -H 'x-riak-index-twitter_bin: jsmith123' \
  -H 'x-riak-index-email_bin: jsmith@basho.com' \
  -H 'Content-Type: application/json' \
  -d '{&quot;userData&quot;:&quot;data&quot;}'
</code></pre>

<blockquote>
<p><strong>Getting started with Riak clients</strong></p>

<p>If you are connecting to Riak using one of Basho&rsquo;s official <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/client-libraries">client libraries</a>, you can find more information about getting started with
your client in the <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/getting-started">Developing with Riak KV: Getting Started</a> section.</p>
</blockquote>

<p>This has accomplished the following:</p>

<ul>
<li>The object has been stored with a primary bucket/key of
<code>users</code>/<code>john_smith</code></li>
<li>The object now has a secondary index called <code>twitter_bin</code> with a value
of <code>jsmith123</code></li>
<li>The object now has a secondary index called <code>email_bin</code> with a value
of <code>jsmith@basho.com</code></li>
</ul>

<h3 id="querying-objects-with-secondary-indexes">Querying Objects with Secondary Indexes</h3>

<p>Let&rsquo;s query the <code>users</code> bucket on the basis of Twitter handle to make
sure that we can find our stored object:</p>

<pre><code class="language-java">Namespace usersBucket = new Namespace(&quot;users&quot;);
BinIndexQuery biq = new BinIndexQuery.Builder(usersBucket, &quot;twitter&quot;, &quot;jsmith123&quot;)
        .build();
BinIndexQuery.Response response = client.execute(biq);
List&lt;BinIndexQuery.Response.Entry&gt; entries = response.getEntries();
for (BinIndexQuery.Response.Entry entry : entries) {
    System.out.println(entry.getRiakObjectLocation().getKey());
}
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket('users')
bucket.get_index('twitter_bin', 'jsmith123')

# This is equivalent to the following:
bucket = client.bucket_type('default').bucket('users')
bucket.get_index('twitter_bin', 'jsmith123')
</code></pre>

<pre><code class="language-php">$response = (new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('users')
  -&gt;withIndexName('twitter_bin')
  -&gt;withScalarValue('jsmith123')
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket('users') # equivalent to client.bucket_type('default').bucket('users')
bucket.get_index('twitter_bin', 'jsmith123').results
</code></pre>

<pre><code class="language-csharp">var idxId = new RiakIndexId(&quot;default&quot;, &quot;users&quot;, &quot;twitter&quot;);
var rslt = client.GetSecondaryIndex(idxId, &quot;jsmith123&quot;);
var idxRslt = rslt.Value;
foreach (var keyTerm in idxRslt.IndexKeyTerms)
{
    Debug.WriteLine(keyTerm.Key);
}
</code></pre>

<pre><code class="language-javascript">var query_keys = [];
function query_cb(err, rslt) {
    if (err) {
        throw new Error(err);
    }

    if (rslt.done) {
        query_keys.forEach(function (key) {
            logger.info(&quot;2i query key: '%s'&quot;, key);
        });
    }

    if (rslt.values.length &gt; 0) {
        Array.prototype.push.apply(query_keys,
            rslt.values.map(function (value) {
                return value.objectKey;
            }));
    }
}

var cmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucket('users')
    .withIndexName('twitter_bin')
    .withIndexKey('jsmith123')
    .withCallback(query_cb)
    .build();
client.execute(cmd);
</code></pre>

<pre><code class="language-erlang">{ok, Results} =
    riakc_pb_socket:get_index(Pid,
                              &lt;&lt;&quot;users&quot;&gt;&gt;, %% bucket
                              {binary_index, &quot;twitter&quot;}, %% index name
                              &lt;&lt;&quot;jsmith123&quot;&gt;&gt;). %% index
</code></pre>

<pre><code class="language-golang">cmd, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;users&quot;).
    WithIndexName(&quot;twitter_bin&quot;).
    WithIndexKey(&quot;jsmith123&quot;).
    Build()
if err != nil {
    return err
}

if err := cluster.Execute(cmd); err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/buckets/users/index/twitter_bin/jsmith123
</code></pre>

<p>The response:</p>

<pre><code class="language-java">john_smith
</code></pre>

<pre><code class="language-ruby">[&quot;john_smith&quot;]
</code></pre>

<pre><code class="language-php">['john_smith']
</code></pre>

<pre><code class="language-python">['john_smith']
</code></pre>

<pre><code class="language-csharp">john_smith
</code></pre>

<pre><code class="language-javascript">john_smith
</code></pre>

<pre><code class="language-erlang">{ok,{index_results_v1,[&lt;&lt;&quot;john_smith&quot;&gt;&gt;],
                      undefined,undefined}}.
</code></pre>

<pre><code class="language-golang">john_smith
</code></pre>

<pre><code class="language-curl">{
  &quot;keys&quot;: [
    &quot;john_smith&quot;
  ]
}
</code></pre>

<h2 id="examples">Examples</h2>

<p>To run the following examples, make sure that Riak is configured to use
an index-capable storage backend, such as <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/leveldb">LevelDB</a> or <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/setup/planning/backend/memory">Memory</a>.</p>

<h2 id="indexing-objects">Indexing Objects</h2>

<p>The following example indexes four different objects. Notice that we&rsquo;re
storing both integer and string (aka binary) fields. Field names are
automatically lowercased, some fields have multiple values, and
duplicate fields are automatically de-duplicated, as in the following
example:</p>

<pre><code class="language-java">Namespace peopleBucket = new Namespace(&quot;indexes&quot;, &quot;people&quot;);

RiakObject larry = new RiakObject()
        .setValue(BinaryValue.create(&quot;My name is Larry&quot;));
larry.getIndexes().getIndex(StringBinIndex.named(&quot;field1&quot;)).add(&quot;val1&quot;);
larry.getIndexes().getIndex(LongIntIndex.named(&quot;field2&quot;)).add(1001L);
StoreValue storeLarry = new StoreValue.Builder(larry)
        .withLocation(peopleBucket.setKey(&quot;larry&quot;))
        .build();
client.execute(storeLarry);

RiakObject moe = new RiakObject()
        .setValue(BinaryValue.create(&quot;Ny name is Moe&quot;));
moe.getIndexes().getIndex(StringBinIdex.named(&quot;Field1&quot;)).add(&quot;val2&quot;);
moe.getIndexes().getIndex(LongIntIndex.named(&quot;Field2&quot;)).add(1002L);
StoreValue storeMoe = new StoreValue.Builder(moe)
        .withLocation(peopleBucket.setKey(&quot;moe&quot;))
        .build();
client.execute(storeMoe);

RiakObject curly = new RiakObject()
        .setValue(BinaryValue.create(&quot;My name is Curly&quot;));
curly.getIndexes().getIndex(StringBinIndex.named(&quot;FIELD1&quot;)).add(&quot;val3&quot;);
curly.getIndexes().getIndex(LongIntIndex.named(&quot;FIELD2&quot;)).add(1003L);
StoreValue storeCurly = new StoreValue.Builder(curly)
        .withLocation(peopleBucket.setKey(&quot;curly&quot;))
        .build();
client.execute(storeCurly);

RiakObject veronica = new RiakObject()
        .setValue(BinaryValue.create(&quot;My name is Veronica&quot;));
veronica.getIndexes().getIndex(StringBinIndex.named(&quot;field1&quot;))
        .add(&quot;val4&quot;).add(&quot;val4&quot;);
veronica.getIndexes().getIndex(LongIntIndex.named(&quot;field2&quot;))
        .add(1004L).add(1005L).add(1006L).add(1004L).add(1004L).add(1007L);
StoreValue storeVeronica = new StoreValue.Builder(veronica)
        .withLocation(peopleBucket.setKey(&quot;veronica&quot;))
        .build();
client.execute(storeVeronica);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')

obj1 = Riak::RObject.new(bucket, 'larry')
obj1.content_type = 'text/plain'
obj1.raw_data = 'My name is Larry'
obj1.indexes['field1_bin'] = %w{ val1 }
# Like binary/string indexes, integer indexes must be set as an array,
# even if you wish to add only a single index
obj1.indexes['field2_int'] = [1001]
obj1.store

obj2 = Riak::RObject.new(bucket, 'moe')
obj2.content_type = 'text/plain'
obj2.raw_data = 'My name is Larry'
obj2.indexes['Field1_bin'] = %w{ val2 }
obj2.indexes['Field2_int'] = [1002]
obj2.store

obj3 = Riak::RObject.new(bucket, 'curly')
obj3.content_type = 'text/plain'
obj3.raw_data = 'My name is Curly'
obj3.indexes['FIELD1_BIN'] = %w{ val3 }
obj3.indexes['FIELD2_INT'] = [1003]
obj3.store

obj4 = Riak::RObject.new(bucket, 'veronica')
obj4.content_type = 'text/plain'
obj4.raw_data = 'My name is Veronica'
obj4.indexes['field1_bin'] = %w{ val4 val4 val4a val4b }
obj4.indexes['field2_int'] = [1004, 1004, 1005, 1006]
obj4.indexes['field2_int'] = [1004]
obj4.indexes['field2_int'] = [1004]
obj4.indexes['field2_int'] = [1004]
obj4.indexes['field2_int'] = [1007]
obj4.store
</code></pre>

<pre><code class="language-php">$bucket = new \Basho\Riak\Bucket('people', 'indexes');

$object = (new \Basho\Riak\Object'My name is Larry', ['Content-type' =&gt; 'text/plain']))
  -&gt;addValueToIndex('field1_bin', 'val1')
  -&gt;addValueToIndex('field2_int', 1001);

(new \Basho\Riak\Command\Builder\StoreObject($riak))
  -&gt;withObject($object)
  -&gt;withLocation(new \Basho\Riak\Location('larry', $bucket))
  -&gt;build()
  -&gt;execute();

$object = (new \Basho\Riak\Object'My name is Moe', ['Content-type' =&gt; 'text/plain']))
  -&gt;addValueToIndex('Field1_bin', 'val2')
  -&gt;addValueToIndex('Field2_int', 1002);

(new \Basho\Riak\Command\Builder\StoreObject($riak))
  -&gt;withObject($object)
  -&gt;withLocation(new \Basho\Riak\Location('moe', $bucket))
  -&gt;build()
  -&gt;execute();

$object = (new \Basho\Riak\Object'My name is Curly', ['Content-type' =&gt; 'text/plain']))
  -&gt;addValueToIndex('FIELD1_BIN', 'val3')
  -&gt;addValueToIndex('FIELD2_int', 1003);

(new \Basho\Riak\Command\Builder\StoreObject($riak))
  -&gt;withObject($object)
  -&gt;withLocation(new \Basho\Riak\Location('curly', $bucket))
  -&gt;build()
  -&gt;execute();

$object = (new \Basho\Riak\Object'My name is Veronica', ['Content-type' =&gt; 'text/plain']))
  -&gt;addValueToIndex('field1_bin', 'val4')
  -&gt;addValueToIndex('field1_bin', 'val4')
  -&gt;addValueToIndex('field1_bin', 'val4a')
  -&gt;addValueToIndex('field1_bin', 'val4b')
  -&gt;addValueToIndex('field2_int', 1004)
  -&gt;addValueToIndex('field2_int', 1005)
  -&gt;addValueToIndex('field2_int', 1006)
  -&gt;addValueToIndex('field2_int', 1004)
  -&gt;addValueToIndex('field2_int', 1004)
  -&gt;addValueToIndex('field2_int', 1007);

(new \Basho\Riak\Command\Builder\StoreObject($riak))
  -&gt;withObject($object)
  -&gt;withLocation(new \Basho\Riak\Location('veronica', $bucket))
  -&gt;build()
  -&gt;execute();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')

obj1 = RiakObject(client, bucket, 'larry')
obj1.content_type = 'text/plain'
obj1.data = 'My name is Larry'
obj1.add_index('field1_bin', 'val1').add_index('field2_int', 1001)
obj1.store()

obj2 = RiakObject(client, bucket, 'moe')
obj2.content_type = 'text/plain'
obj2data = 'Moe'
obj2.add_index('Field1_bin', 'val2').add_index('Field2_int', 1002)
obj2.store()

obj3 = RiakObject(client, bucket, 'curly')
obj3.content_type = 'text/plain'
obj3.data = 'Curly'
obj3.add_index('FIELD1_BIN', 'val3').add_index('FIELD2_INT', 1003)
obj3.store()

obj4 = RiakObject(client, bucket, 'veronica')
obj4.content_type = 'text/plain'
obj4.data = 'Veronica'
obj4.add_index('field1_bin', 'val4').add_index('field1_bin', 'val4a').add_index('field1_bin', 'val4b').add_index('field2_int', 1004).add_index('field2_int', 1004).add_index('field2_int', 1005).add_index('field2_int', 1006).add_index('field2_int', 1004).add_index('field2_int', 1004).add_index('field2_int', 1004).add_index('field2_int', 1007)
obj4.store()
</code></pre>

<pre><code class="language-csharp">var larryId = new RiakObjectId(&quot;indexes&quot;, &quot;people&quot;, &quot;larry&quot;);
var larry = new RiakObject(larryId, &quot;My name is Larry&quot;,
    RiakConstants.ContentTypes.TextPlain);

larry.BinIndex(&quot;field1&quot;).Set(&quot;val1&quot;);
larry.IntIndex(&quot;field2&quot;).Set(1001);

client.Put(larry);

var moeId = new RiakObjectId(&quot;indexes&quot;, &quot;people&quot;, &quot;moe&quot;);
var moe = new RiakObject(moeId, &quot;My name is Moe&quot;,
    RiakConstants.ContentTypes.TextPlain);

moe.BinIndex(&quot;Field1&quot;).Set(&quot;val2&quot;);
moe.IntIndex(&quot;Field2&quot;).Set(1002);

client.Put(moe);

var curlyId = new RiakObjectId(&quot;indexes&quot;, &quot;people&quot;, &quot;curly&quot;);
var curly = new RiakObject(curlyId, &quot;My name is Curly&quot;,
    RiakConstants.ContentTypes.TextPlain);

curly.BinIndex(&quot;FIELD1&quot;).Set(&quot;val3&quot;);
curly.IntIndex(&quot;FIELD2&quot;).Set(1003);

client.Put(curly);

var veronicaId = new RiakObjectId(&quot;indexes&quot;, &quot;people&quot;, &quot;veronica&quot;);
var veronica = new RiakObject(veronicaId, &quot;My name is Veronica&quot;,
    RiakConstants.ContentTypes.TextPlain);

veronica.BinIndex(&quot;FIELD1&quot;).Set(new string[] { &quot;val4&quot;, &quot;val4a&quot;, &quot;val4b&quot; });
veronica.IntIndex(&quot;FIELD2&quot;).Set(new BigInteger[] {
    1004, 1005, 1006, 1004, 1004, 1007
});

client.Put(veronica);
</code></pre>

<pre><code class="language-javascript">function store_cb(err, rslt, async_cb) {
    if (err) {
        throw new Error(err);
    }
    async_cb(null, rslt);
}

var storeFuncs = [
    function (async_cb) {
        var riakObj = new Riak.Commands.KV.RiakObject();
        riakObj.setContentType('text/plain');
        riakObj.setBucketType('indexes');
        riakObj.setBucket('people');
        riakObj.setKey('larry');
        riakObj.setValue('My name is Larry');
        riakObj.addToIndex('field1_bin', 'val1');
        riakObj.addToIndex('field2_int', 1001);
        client.storeValue({ value: riakObj }, function (err, rslt) {
            store_cb(err, rslt, async_cb);
        });
    },
    function (async_cb) {
        var riakObj = new Riak.Commands.KV.RiakObject();
        riakObj.setContentType('text/plain');
        riakObj.setBucketType('indexes');
        riakObj.setBucket('people');
        riakObj.setKey('moe');
        riakObj.setValue('My name is Moe');
        riakObj.addToIndex('Field1_bin', 'val2');
        riakObj.addToIndex('Field2_int', 1002);
        client.storeValue({ value: riakObj }, function (err, rslt) {
            store_cb(err, rslt, async_cb);
        });
    },
    function (async_cb) {
        var riakObj = new Riak.Commands.KV.RiakObject();
        riakObj.setContentType('text/plain');
        riakObj.setBucketType('indexes');
        riakObj.setBucket('people');
        riakObj.setKey('curly');
        riakObj.setValue('My name is Curly');
        riakObj.addToIndex('FIELD1_BIN', 'val3');
        riakObj.addToIndex('FIELD2_INT', 1003);
        client.storeValue({ value: riakObj }, function (err, rslt) {
            store_cb(err, rslt, async_cb);
        });
    },
    function (async_cb) {
        var riakObj = new Riak.Commands.KV.RiakObject();
        riakObj.setContentType('text/plain');
        riakObj.setBucketType('indexes');
        riakObj.setBucket('people');
        riakObj.setKey('veronica');
        riakObj.setValue('My name is Veronica');
        riakObj.addToIndex('FIELD1_bin', 'val4');
        riakObj.addToIndex('FIELD1_bin', 'val4');
        riakObj.addToIndex('FIELD1_bin', 'val4a');
        riakObj.addToIndex('FIELD1_bin', 'val4b');
        riakObj.addToIndex('FIELD2_int', 1004);
        riakObj.addToIndex('FIELD2_int', 1005);
        riakObj.addToIndex('FIELD2_int', 1006);
        riakObj.addToIndex('FIELD2_int', 1004);
        riakObj.addToIndex('FIELD2_int', 1004);
        riakObj.addToIndex('FIELD2_int', 1007);
        client.storeValue({ value: riakObj }, function (err, rslt) {
            store_cb(err, rslt, async_cb);
        });
    }
];
async.parallel(storeFuncs, function (err, rslts) {
    if (err) {
        throw new Error(err);
    }
});
</code></pre>

<pre><code class="language-erlang">Larry = riakc_obj:new(
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;},
    &lt;&lt;&quot;larry&quot;&gt;&gt;,
    &lt;&lt;&quot;My name is Larry&quot;&gt;&gt;,
    &lt;&lt;&quot;text/plain&quot;&gt;&gt;),
LarryMetadata = riakc_obj:get_update_metadata(Larry),
LarryIndexes = riakc_obj:set_secondary_index(
    LarryMetadata,
    [{{binary_index, &quot;field1&quot;}, [&lt;&lt;&quot;val1&quot;&gt;&gt;]}, {{integer_index, &quot;field2&quot;}, [1001]}]
),
LarryWithIndexes = riakc_obj:update_metadata(Larry, LarryIndexes).

Moe = riakc_obj:new(
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;},
    &lt;&lt;&quot;moe&quot;&gt;&gt;,
    &lt;&lt;&quot;My name is Moe&quot;&gt;&gt;,
    &lt;&lt;&quot;text/plain&quot;&gt;&gt;),
MoeMetadata = riakc_obj:get_update_metadata(Moe),
MoeIndexes = riakc_obj:set_secondary_index(
    MoeMetadata,
    [{{binary_index, &quot;Field1&quot;}, [&lt;&lt;&quot;val2&quot;&gt;&gt;]}, {{integer_index, &quot;Field2&quot;}, [1002]}]
),
MoeWithIndexes = riakc_obj:update_metadata(Moe, MoeIndexes).

Curly = riakc_obj:new(
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;},
    &lt;&lt;&quot;curly&quot;&gt;&gt;,
    &lt;&lt;&quot;My name is Curly&quot;&gt;&gt;,
    &lt;&lt;&quot;text/plain&quot;&gt;&gt;),
CurlyMetadata = riakc_obj:get_update_metadata(Curly),
CurlyIndexes = riakc_obj:set_secondary_index(
    CurlyMetadata,
    [{{binary_index, &quot;FIELD1&quot;}, [&lt;&lt;&quot;val3&quot;&gt;&gt;]}, {{integer_index, &quot;FIELD2&quot;}, [1003]}]
),
CurlyWithIndexes = riakc_obj:update_metadata(Curly, CurlyIndexes).

Veronica = riakc_obj:new(
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;},
    &lt;&lt;&quot;veronica&quot;&gt;&gt;,
    &lt;&lt;&quot;My name is Veronica&quot;&gt;&gt;,
    &lt;&lt;&quot;text/plain&quot;&gt;&gt;),
VeronicaMetadata = riakc_obj:get_update_metadata(Veronica),
VeronicaIndexes = riakc_obj:set_secondary_index(
    VeronicaMetadata,
    [{{binary_index, &quot;field1&quot;}, [&lt;&lt;&quot;val4&quot;&gt;&gt;]}, {{binary_index, &quot;field1&quot;}, [&lt;&lt;&quot;val4&quot;&gt;&gt;]}, {{integer_index, &quot;field2&quot;}, [1004]}, {{integer_index, &quot;field2&quot;}, [1004]}, {{integer_index, &quot;field2&quot;}, [1005]}, {{integer_index, &quot;field2&quot;}, [1006]}, {{integer_index, &quot;field2&quot;}, [1004]}, {{integer_index, &quot;field2&quot;}, [1004]}, {{integer_index, &quot;field2&quot;}, [1007]}]
),
VeronicaWithIndexes = riakc_obj:update_metadata(Veronica, VeronicaIndexes).
</code></pre>

<pre><code class="language-golang">o1 := &amp;riak.Object{
    Key:   &quot;larry&quot;,
    Value: []byte(&quot;My name is Larry&quot;),
}
o1.AddToIndex(&quot;field1_bin&quot;, &quot;val1&quot;)
o1.AddToIntIndex(&quot;field2_int&quot;, 1001)

o2 := &amp;riak.Object{
    Key:   &quot;moe&quot;,
    Value: []byte(&quot;My name is Moe&quot;),
}
o2.AddToIndex(&quot;Field1_bin&quot;, &quot;val2&quot;)
o2.AddToIntIndex(&quot;Field2_int&quot;, 1002)

o3 := &amp;riak.Object{
    Key:   &quot;curly&quot;,
    Value: []byte(&quot;My name is Curly&quot;),
}
o3.AddToIndex(&quot;FIELD1_BIN&quot;, &quot;val3&quot;)
o3.AddToIntIndex(&quot;FIELD2_INT&quot;, 1003)

o4 := &amp;riak.Object{
    Key:   &quot;veronica&quot;,
    Value: []byte(&quot;My name is Veronica&quot;),
}
o4.AddToIndex(&quot;FIELD1_bin&quot;, &quot;val4&quot;)
o4.AddToIndex(&quot;FIELD1_bin&quot;, &quot;val4&quot;)
o4.AddToIndex(&quot;FIELD1_bin&quot;, &quot;val4a&quot;)
o4.AddToIndex(&quot;FIELD1_bin&quot;, &quot;val4b&quot;)
o4.AddToIntIndex(&quot;FIELD2_int&quot;, 1004)
o4.AddToIntIndex(&quot;FIELD2_int&quot;, 1005)
o4.AddToIntIndex(&quot;FIELD2_int&quot;, 1006)
o4.AddToIntIndex(&quot;FIELD2_int&quot;, 1004)
o4.AddToIntIndex(&quot;FIELD2_int&quot;, 1004)
o4.AddToIntIndex(&quot;FIELD2_int&quot;, 1007)

objs := [...]*riak.Object{o1, o2, o3, o4}

wg := &amp;sync.WaitGroup{}
for _, obj := range objs {
    obj.ContentType = &quot;text/plain&quot;
    obj.Charset = &quot;utf-8&quot;
    obj.ContentEncoding = &quot;utf-8&quot;

    cmd, err := riak.NewStoreValueCommandBuilder().
        WithBucketType(&quot;indexes&quot;).
        WithBucket(&quot;people&quot;).
        WithContent(obj).
        Build()
    if err != nil {
        return err
    }

    args := &amp;riak.Async{
        Command: cmd,
        Wait:    wg,
    }
    if err := cluster.ExecuteAsync(args); err != nil {
        return err
    }
}

wg.Wait()
</code></pre>

<pre><code class="language-curl">curl -v -XPUT localhost:8098/types/indexes/buckets/people/keys/larry \
  -H &quot;x-riak-index-field1_bin: val1&quot; \
  -H &quot;x-riak-index-field2_int: 1001&quot; \
  -d 'My name is Larry'

curl -v -XPUT localhost:8098/types/indexes/buckets/people/keys/moe \
  -H &quot;x-riak-index-Field1_bin: val2&quot; \
  -H &quot;x-riak-index-Field2_int: 1002&quot; \
  -d 'My name is Moe'

curl -v -XPUT localhost:8098/types/indexes/buckets/people/keys/curly \
  -H &quot;X-RIAK-INDEX-FIELD1_BIN: val3&quot; \
  -H &quot;X-RIAK-INDEX-FIELD2_INT: 1003&quot; \
  -d 'My name is Curly'

curl -v -XPUT 127.0.0.1:8098/types/indexes/buckets/people/keys/veronica \
  -H &quot;x-riak-index-field1_bin: val4, val4, val4a, val4b&quot; \
  -H &quot;x-riak-index-field2_int: 1004, 1004, 1005, 1006&quot; \
  -H &quot;x-riak-index-field2_int: 1004&quot; \
  -H &quot;x-riak-index-field2_int: 1004&quot; \
  -H &quot;x-riak-index-field2_int: 1004&quot; \
  -H &quot;x-riak-index-field2_int: 1007&quot; \
  -d 'My name is Veronica'
</code></pre>

<p>The above objects will end up having the following secondary indexes,
respectively:</p>

<ul>
<li><code>Larry</code> &mdash; Binary index <code>field1_bin</code> and integer index <code>field2_int</code></li>
<li><code>Moe</code> &mdash; Binary index <code>field1_bin</code> and integer index <code>field2_int</code>
(note that the index names are set to lowercase by Riak)</li>
<li><code>Curly</code> &mdash; Binary index <code>field1_bin</code> and integer index <code>field2_int</code>
(note again that the index names are set to lowercase)</li>
<li><code>Veronica</code> &mdash; Binary index <code>field1_bin</code> with the values <code>val4</code>,
<code>val4a</code>, and <code>val4b</code> and integer index <code>field2_int</code> with the values
<code>1004</code>, <code>1005</code>, <code>1006</code>, and <code>1007</code> (note that redundancies have been removed)</li>
</ul>

<p>As these examples show, there are safeguards in Riak that both normalize
the names of indexes and prevent the accumulation of redundant indexes.</p>

<h2 id="invalid-field-names-and-types">Invalid Field Names and Types</h2>

<p>The following examples demonstrate what happens when an index field is
specified with an invalid field name or type. The system responds with
<code>400 Bad Request</code> and a description of the error.</p>

<p>Invalid field name:</p>

<pre><code class="language-java">// The Java client will not allow you to provide invalid index names,
// because you are not required to add &quot;_bin&quot; or &quot;_int&quot; to the end of
// those names
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
obj = Riak::RObject.new(bucket, 'larry')
obj.indexes['field2_foo'] = [1001]

# The Ruby client will let you get away with this...at first. But when
# you attempt to store the object, you will get an error response such
# as this:

NoMethodError: undefined method 'map' for 1001:Fixnum
</code></pre>

<pre><code class="language-php">// throws \InvalidArgumentException
$object = (new \Basho\Riak\Object('{&quot;user_data&quot;:{ ... }}', ['Content-type' =&gt; 'application/json']))
  -&gt;addValueToIndex('twitter', 'jsmith123');
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
obj = RiakObject(client, bucket, 'larry')
obj.add_index('field2_foo', 1001)

# Result:
riak.RiakError: &quot;Riak 2i fields must end with either '_bin' or '_int'.&quot;
</code></pre>

<pre><code class="language-csharp">// The Riak .NET Client will not allow you to provide invalid index names,
// because you are not required to add &quot;_bin&quot; or &quot;_int&quot; to the end of
// those names
</code></pre>

<pre><code class="language-javascript">var cmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('people')
    .withIndexName('field2_foo')
    .withIndexKey('jsmith123')
    .withCallback(query_cb)
    .build();
client.execute(cmd);

// Produces the following stack trace (truncated):
error: query_cb err: 'Error processing incoming message: error:function_clause:[{riak_api_pb_server,
    send_error,
    [{unknown_field_type,
        &lt;&lt;&quot;field2_foo&quot;&gt;&gt;},
    {state,
        {gen_tcp,inet},
        #Port&lt;0.68338&gt;,
        undefined,
        ...
        ...
        ...
</code></pre>

<pre><code class="language-erlang">Obj = riakc_obj:new(
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;},
    &lt;&lt;&quot;larry&quot;&gt;&gt;,
    &lt;&lt;&quot;some data&quot;&gt;&gt;,
    &lt;&lt;&quot;text/plain&quot;&gt;&gt;
),
MD1 = riakc_obj:get_update_metadata(Obj),
MD2 = riakc_obj:set_secondary_index(MD1, [{{foo_index, &quot;field2&quot;}, [1001]}]).

%% The Erlang client will return an error message along these lines:
** exception error: no function clause matching
                    riakc_obj:set_secondary_index( ... ).
</code></pre>

<pre><code class="language-golang">cmd, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;users&quot;).
    WithIndexName(&quot;field2_foo&quot;).
    WithIndexKey(&quot;jsmith123&quot;).
    Build()
if err != nil {
    return err
}

if err := cluster.Execute(cmd); err != nil {
    fmt.Println(&quot;[DevUsing2i] field name error:&quot;, err)
} else {
    return errors.New(&quot;[DevUsing2i] expected an error!&quot;)
}

// Produces the following stack trace (truncated):
error: query_cb err: 'Error processing incoming message: error:function_clause:[{riak_api_pb_server,
    send_error,
    [{unknown_field_type,
        &lt;&lt;&quot;field2_foo&quot;&gt;&gt;},
    {state,
        {gen_tcp,inet},
        #Port&lt;0.68338&gt;,
        undefined,
        ...
        ...
        ...
</code></pre>

<pre><code class="language-curl">curl -XPUT 127.0.0.1:8098/types/indexes/buckets/people/keys/larry \
  -H &quot;x-riak-index-field2_foo: 1001&quot; \
  -d 'data1'

# Response
Unknown field type for field: 'field2_foo'.
</code></pre>

<p>Incorrect data type:</p>

<pre><code class="language-java">Location key = new Location(new Namespace(&quot;people&quot;), &quot;larry&quot;);
RiakObject obj = new RiakObject();
obj.getIndexes().getIndex(LongIntIndex.named(&quot;field2&quot;)).add(&quot;bar&quot;);

// The Java client will return a response indicating a type mismatch.
// The output may look something like this:

Error:(46, 68) java: no suitable method found for add(java.lang.String)
    method com.basho.riak.client.query.indexes.RiakIndex.add(java.lang.Long) is not applicable
      (argument mismatch; java.lang.String cannot be converted to java.lang.Long)
    method com.basho.riak.client.query.indexes.RiakIndex.add(java.util.Collection&lt;java.lang.Long&gt;) is not applicable
      (argument mismatch; java.lang.String cannot be converted to java.util.Collection&lt;java.lang.Long&gt;)
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
obj = Riak::RObject.new(bucket, 'larry')
obj.indexes['field2_int'] = %w{ bar }

# The Ruby client will let you get away with this...at first. But when
# you attempt to store the object, you will get an error response such
# as this:

NoMethodError: undefined method 'map' for 1001:Fixnum
</code></pre>

<pre><code class="language-php">// throws \InvalidArgumentException
$object = (new \Basho\Riak\Object('{&quot;user_data&quot;:{ ... }}', ['Content-type' =&gt; 'application/json']))
  -&gt;addValueToIndex('twitter_int', 'not_an_int');

// throws \InvalidArgumentException
$object = (new \Basho\Riak\Object('{&quot;user_data&quot;:{ ... }}', ['Content-type' =&gt; 'application/json']))
  -&gt;addValueToIndex('twitter_int', ['arrays', 'are', 'not', 'strings']);

// does not throw an exception, it will just write ints as a string
// only requirement is that value is scalar (int, float, string, bool)
$object = (new \Basho\Riak\Object('{&quot;user_data&quot;:{ ... }}', ['Content-type' =&gt; 'application/json']))
  -&gt;addValueToIndex('twitter_bin', 12);
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
obj = RiakObject(client, bucket, 'larry')
obj.add_index('field2_int', 'bar')

# The Python client will let you get away with this...at first. But when you
# attempt to store the object, you will get an error response such as this:
riak.RiakError: '{precommit_fail,[{field_parsing_failed,{&lt;&lt;&quot;field2_int&quot;&gt;&gt;,&lt;&lt;&quot;bar&quot;&gt;&gt;}}]}'
</code></pre>

<pre><code class="language-csharp">var id = new RiakObjectId(&quot;indexes&quot;, &quot;people&quot;, &quot;larry&quot;);
var obj = new RiakObject(id, &quot;test value&quot;, &quot;text/plain&quot;);
var intIdx = obj.IntIndex(&quot;test-int-idx&quot;);
intIdx.Add(&quot;invalid-value&quot;);

// The .NET client will throw a FormatException at this point
// The output may look something like this:

The value could not be parsed.
</code></pre>

<pre><code class="language-javascript">var riakObj = new Riak.Commands.KV.RiakObject();
riakObj.setContentType('text/plain');
riakObj.setBucketType('indexes');
riakObj.setBucket('people');
riakObj.setKey('larry');
riakObj.addToIndex('field2_int', 'bar');
try {
    client.storeValue({ value: riakObj }, function (err, rslt) {
        logger.error(&quot;incorrect_data_type err: '%s'&quot;, err);
    });
} catch (e) {
    logger.error(&quot;incorrect_data_type err: '%s'&quot;, e);
}

// Output:
buffer.js:67
    throw new TypeError('must start with number, buffer, array or string');
          ^
TypeError: must start with number, buffer, array or string
    at new Buffer (buffer.js:67:11)
</code></pre>

<pre><code class="language-erlang">Obj = riakc_obj:new(
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;},
    &lt;&lt;&quot;larry&quot;&gt;&gt;,
    &lt;&lt;&quot;some data&quot;&gt;&gt;,
    &lt;&lt;&quot;text/plain&quot;&gt;&gt;
),
MD1 = riakc_obj:get_update_metadata(Obj),
MD2 = riakc_obj:set_secondary_index(MD1, [{{integer_index, &quot;field2&quot;}, [&lt;&lt;&quot;bar&quot;&gt;&gt;]}]).

%% The Erlang client will return an error message along these lines:
** exception error: bad argument
     in function  integer_to_list/1
        called as integer_to_list(&lt;&lt;&quot;bar&quot;&gt;&gt;) ...
</code></pre>

<pre><code class="language-golang">obj := &amp;riak.Object{
    BucketType:      &quot;indexes&quot;,
    Bucket:          &quot;people&quot;,
    Key:             &quot;larry&quot;,
    ContentType:     &quot;text/plain&quot;,
    Charset:         &quot;utf-8&quot;,
    ContentEncoding: &quot;utf-8&quot;,
    Value:           []byte(&quot;My name is Larry&quot;),
}
obj.AddToIndex(&quot;field2_int&quot;, &quot;bar&quot;)

cmd, err := riak.NewStoreValueCommandBuilder().
    WithContent(obj).
    Build()
if err != nil {
    return err
}

if err := cluster.Execute(cmd); err != nil {
    fmt.Println(&quot;[DevUsing2i] index data type error:&quot;, err)
} else {
    return errors.New(&quot;[DevUsing2i] expected an error!&quot;)
}

// The riak.Error object will contain:
{precommit_fail,[{field_parsing_failed,{&lt;&lt;&quot;field2_int&quot;&gt;&gt;,&lt;&lt;&quot;bar&quot;&gt;&gt;}}]}
</code></pre>

<pre><code class="language-curl">curl -XPUT 127.0.0.1:8098/types/indexes/buckets/people/keys/larry \
  -H &quot;x-riak-index-field2_int: bar&quot; \
  -d 'data1'

# Response
HTTP/1.1 400 Bad Request

Could not parse field 'field2_int', value 'bar'.
</code></pre>

<h2 id="querying">Querying</h2>

<blockquote>
<p><strong>Note on 2i queries and the R parameter</strong></p>

<p>For all 2i queries, the <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/developing/app-guide/replication-properties#r-value-and-read-failure-tolerance">R</a> parameter is set to 1,
which means that queries that are run while <a href="//evadne.github.io/basho_docs/riak/kv/2.2.3/learn/glossary/#hinted-handoff">handoffs</a> and related operations are underway may not
return all keys as expected.</p>
</blockquote>

<h3 id="exact-match">Exact Match</h3>

<p>The following examples perform an exact match index query.</p>

<p>Query a binary index:</p>

<pre><code class="language-java">Namespace myBucket = new Namespace(&quot;indexes&quot;, &quot;people&quot;);
BinIndexQuery biq = new BinIndexQuery.Builder(myBucket, &quot;field1&quot;, &quot;val1&quot;).build();
BinIndexQuery.Response response = client.execute(biq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field1_bin', 'val1')
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('people', 'indexes')
  -&gt;withIndexName('field1_bin')
  -&gt;withScalarValue('val1')
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field1_bin', 'val1')
</code></pre>

<pre><code class="language-csharp">var riakIndexId = new RiakIndexId(&quot;indexes&quot;, &quot;people&quot;, &quot;field1&quot;);
// Note: using a string argument indicates a binary index query:
var indexRiakResult = client.GetSecondaryIndex(riakIndexId, &quot;val1&quot;);
var indexResult = indexRiakResult.Value;
</code></pre>

<pre><code class="language-javascript">var binIdxCmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('people')
    .withIndexName('field1_bin')
    .withIndexKey('val1')
    .withCallback(query_cb)
    .build();
client.execute(binIdxCmd);
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;}, %% bucket type and bucket name
    {binary_index, &quot;field2&quot;},
    &lt;&lt;&quot;val1&quot;&gt;&gt;
).
</code></pre>

<pre><code class="language-golang">c1, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;people&quot;).
    WithIndexName(&quot;field1_bin&quot;).
    WithIndexKey(&quot;val1&quot;).
    Build()
if err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/people/index/field1_bin/val1
</code></pre>

<p>Query an integer index:</p>

<pre><code class="language-java">Namespace myBucket = new Namespace(&quot;indexes&quot;, &quot;people&quot;);
IntIndexQuery iiq = new IntIndexQuery.Builder(myBucket, &quot;field2&quot;, 1001L)
        .build();
IntIndexQuery.Response response = client.execute(iiq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field2_int', 1001)
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('people', 'indexes')
  -&gt;withIndexName('field2_int')
  -&gt;withScalarValue(1001)
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field2_int', 1001)
</code></pre>

<pre><code class="language-csharp">var riakIndexId = new RiakIndexId(&quot;indexes&quot;, &quot;people&quot;, &quot;field2&quot;);
// Note: using an integer argument indicates an int index query:
var indexRiakResult = client.GetSecondaryIndex(riakIndexId, 1001);
var indexResult = indexRiakResult.Value;
</code></pre>

<pre><code class="language-javascript">var intIdxCmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('people')
    .withIndexName('field2_int')
    .withIndexKey(1001)
    .withCallback(query_cb)
    .build();
client.execute(intIdxCmd);
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;}, %% bucket type and bucket name
    {integer_index, &quot;field2&quot;},
    1001
).
</code></pre>

<pre><code class="language-golang">cmd, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;people&quot;).
    WithIndexName(&quot;field2_int&quot;).
    WithIntIndexKey(1001).
    Build()
if err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/people/index/field2_int/1001
</code></pre>

<p>The following example performs an exact match query and pipes the
results into a MapReduce job:</p>

<pre><code class="language-curl">curl -XPOST localhost:8098/mapred \
  -H &quot;Content-Type: application/json&quot; \
  -d @-&lt;&lt;EOF
{
  &quot;inputs&quot;: {
    &quot;bucket&quot;: &quot;people&quot;,
    &quot;index&quot;: &quot;field2_bin&quot;,
    &quot;key&quot;:&quot;val3&quot;
  },
  &quot;query&quot;: [
    {
      &quot;reduce&quot;: {
        &quot;language&quot;:&quot;erlang&quot;,
        &quot;module&quot;: &quot;riak_kv_mapreduce&quot;,
        &quot;function&quot;: &quot;reduce_identity&quot;,
        &quot;keep&quot;: true
      }
    }
  ]
}
EOF
</code></pre>

<h3 id="range">Range</h3>

<p>The following examples perform a range query.</p>

<p>Query a binary index&hellip;</p>

<pre><code class="language-java">Namespace myBucket = new Namespace(&quot;indexes&quot;, &quot;people&quot;);
BinIndexQuery biq = new BinIndexQuery.Builder(myBucket, &quot;field1&quot;, &quot;val2&quot;, &quot;val4&quot;)
        .build();
BinIndexQuery.Response response = client.execute(biq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field1_bin', 'val2'..'val4')
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('people', 'indexes')
  -&gt;withIndexName('field1_bin')
  -&gt;withRangeValue('val2', 'val4')
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field1_bin', 'val2', 'val4')
</code></pre>

<pre><code class="language-csharp">var riakIndexId = new RiakIndexId(&quot;indexes&quot;, &quot;people&quot;, &quot;field1&quot;);
var indexRiakResult = client.GetSecondaryIndex(riakIndexId, &quot;val2&quot;, &quot;val4&quot;);
var indexResult = indexRiakResult.Value;
</code></pre>

<pre><code class="language-javascript">var binIdxCmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('people')
    .withIndexName('field1_bin')
    .withRange('val2', 'val4')
    .withCallback(query_cb)
    .build();
client.execute(binIdxCmd);
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index_range(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;}, %% bucket type and bucket name
    {binary_index, &quot;field1&quot;}, %% index name
    &lt;&lt;&quot;val2&quot;&gt;&gt;, &lt;&lt;&quot;val4&quot;&gt;&gt; %% range query for keys between &quot;val2&quot; and &quot;val4&quot;
).
</code></pre>

<pre><code class="language-golang">c1, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;people&quot;).
    WithIndexName(&quot;field1_bin&quot;).
    WithRange(&quot;val2&quot;, &quot;val4&quot;).
    Build()
if err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/people/index/field1_bin/val2/val4
</code></pre>

<p>Or query an integer index&hellip;</p>

<pre><code class="language-java">Namespace myBucket = new Namespace(&quot;indexes&quot;, &quot;people&quot;);
IntIndexQuery iiq = new IntIndexQuery.Builder(myBucket, &quot;field2&quot;, 1002L, 1004L)
        .build();
IntIndexQuery.Response response = client.execute(iiq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field2_int', 1002..1004)
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('people', 'indexes')
  -&gt;withIndexName('field2_int')
  -&gt;withRangeValue(1002, 1004)
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('field2_int', 1002, 1004)
</code></pre>

<pre><code class="language-csharp">var riakIndexId = new RiakIndexId(&quot;indexes&quot;, &quot;people&quot;, &quot;field2&quot;);
var indexRiakResult = client.GetSecondaryIndex(riakIndexId, 1002, 1004);
var indexResult = indexRiakResult.Value;
</code></pre>

<pre><code class="language-javascript">var intIdxCmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('people')
    .withIndexName('field2_int')
    .withRange(1002, 1004)
    .withCallback(query_cb)
    .build();
client.execute(intIdxCmd);
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index_range(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;}, %% bucket type and bucket name
    {integer_index, &quot;field2&quot;}, %% index name
    1002, 1004 %% range query for keys between &quot;val2&quot; and &quot;val4&quot;
).
</code></pre>

<pre><code class="language-golang">cmd, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;people&quot;).
    WithIndexName(&quot;field2_int&quot;).
    WithIntRange(1002, 1004).
    Build()
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/people/index/field2_int/1002/1004
</code></pre>

<p>The following example performs a range query and pipes the results into
a MapReduce job:</p>

<pre><code class="language-curl">curl -XPOST localhost:8098/mapred\
  -H &quot;Content-Type: application/json&quot; \
  -d @-&lt;&lt;EOF
{
  &quot;inputs&quot;: {
    &quot;bucket&quot;: &quot;people&quot;,
    &quot;index&quot;: &quot;field2_bin&quot;,
    &quot;start&quot;: &quot;1002&quot;,
    &quot;end&quot;: &quot;1004&quot;
  },
  &quot;query&quot;: [
    {
      &quot;reduce&quot;: {
        &quot;language&quot;: &quot;erlang&quot;,
        &quot;module&quot;: &quot;riak_kv_mapreduce&quot;,
        &quot;function&quot;: &quot;reduce_identity&quot;,
        &quot;keep&quot;: true
      }
    }
  ]
}
EOF
</code></pre>

<h4 id="range-with-terms">Range with terms</h4>

<p>When performing a range query, it is possible to retrieve the matched
index values alongside the Riak keys using <code>return_terms=true</code>. An
example from a small sampling of Twitter data with indexed hash tags:</p>

<pre><code class="language-java">Namespace tweetsBucket = new Namespace(&quot;indexes&quot;, &quot;tweets&quot;);
BinIndexQuery biq = new BinIndexQuery.Builder(tweetsBucket, &quot;hashtags&quot;, &quot;rock&quot;, &quot;rocl&quot;)
        .withKeyAndIndex(true)
        .build();
BinIndexQuery.Response response = client.execute(biq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('tweets')
bucket.get_index('hashtags_bin', 'rock'..'rocl', return_terms: true)
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('tweets', 'indexes')
  -&gt;withIndexName('hashtags')
  -&gt;withRangeValue('rock', 'rocl')
  -&gt;withReturnTerms()
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('tweets')
bucket.get_index('hashtags_bin', 'rock', 'rocl', return_terms=True)
</code></pre>

<pre><code class="language-csharp">var riakIndexId = new RiakIndexId(&quot;indexes&quot;, &quot;tweets&quot;, &quot;hashtags&quot;);
var options = new RiakIndexGetOptions();
options.SetReturnTerms(true);
var indexRiakResult = client.GetSecondaryIndex(riakIndexId, &quot;rock&quot;, &quot;rocl&quot;, options);
var indexResult = indexRiakResult.Value;
</code></pre>

<pre><code class="language-javascript">var binIdxCmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('tweets')
    .withIndexName('hashtags_bin')
    .withRange('rock', 'rocl')
    .withReturnKeyAndIndex(true)
    .withCallback(query_cb)
    .build();
client.execute(binIdxCmd);
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index_range(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;}, %% bucket type and bucket name
    {binary_index, &quot;hashtags&quot;},     %% index name
    &lt;&lt;&quot;rock&quot;&gt;&gt;, &lt;&lt;&quot;rocl&quot;&gt;&gt;          %% range query for keys between &quot;val2&quot; and &quot;val4&quot;
).
</code></pre>

<pre><code class="language-golang">cmd, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;tweets&quot;).
    WithIndexName(&quot;hashtags_bin&quot;).
    WithRange(&quot;rock&quot;, &quot;rocl&quot;).
    Build()
if err != nil {
    return err
}

if err := cluster.Execute(cmd); err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/tweets/index/hashtags_bin/rock/rocl?return_terms=true
</code></pre>

<p>Response:</p>

<pre><code class="language-json">{
  &quot;results&quot;: [
    {
      &quot;rock&quot;: &quot;349224101224787968&quot;
    },
    {
      &quot;rocks&quot;: &quot;349223639880699905&quot;
    }
  ]
}
</code></pre>

<h3 id="pagination">Pagination</h3>

<p>When asking for large result sets, it is often desirable to ask the
servers to return chunks of results instead of a firehose. You can do so
using <code>max_results=&lt;n&gt;</code>, where <code>n</code> is the number of results you&rsquo;d like
to receive.</p>

<p>Assuming more keys are available, a <code>continuation</code> value will be
included in the results to allow the client to request the next page.</p>

<p>Here is an example of a range query with both <code>return_terms</code> and
pagination against the same Twitter data set.</p>

<pre><code class="language-java">Namespace tweetsBucket = new Namespace(&quot;indexes&quot;, &quot;tweets&quot;);
BinIndexQuery biq = new BinIndexQuery.Builder(tweetsBucket, &quot;hashtags&quot;, &quot;ri&quot;, &quot;ru&quot;)
        .withMaxResults(5)
        .build();
BinIndexQuery.Response response = client.execute(biq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('tweets')
bucket.get_index('hashtags_bin', 'ri'..'ru', max_results: 5)
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('tweets', 'indexes')
  -&gt;withIndexName('hashtags')
  -&gt;withRangeValue('ri', 'ru')
  -&gt;withMaxResults(5)
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('tweets')
bucket.get_index('hashtags_bin', 'ri', 'ru', max_results=5)
</code></pre>

<pre><code class="language-csharp">var idxId = new RiakIndexId(&quot;indexes&quot;, &quot;tweets&quot;, &quot;hashtags&quot;);
var options = new RiakIndexGetOptions();
options.SetMaxResults(5);
var rslt = client.GetSecondaryIndex(idxId, &quot;ri&quot;, &quot;ru&quot;, options);

options.SetContinuation(rslt.Continuation);
rslt = client.GetSecondaryIndex(idxId, &quot;ri&quot;, &quot;ru&quot;, options);
</code></pre>

<pre><code class="language-javascript">function do_query(continuation) {
    var binIdxCmdBuilder = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
        .withBucketType('indexes')
        .withBucket('tweets')
        .withIndexName('hashtags_bin')
        .withRange('ri', 'ru')
        .withMaxResults(5)
        .withCallback(pagination_cb);

    if (continuation) {
        binIdxCmdBuilder.withContinuation(continuation);
    }

    client.execute(binIdxCmdBuilder.build());
}

var query_keys = [];
function pagination_cb(err, rslt) {
    if (err) {
        logger.error(&quot;query_cb err: '%s'&quot;, err);
        return;
    }

    if (rslt.done) {
        query_keys.forEach(function (key) {
            logger.info(&quot;2i query key: '%s'&quot;, key);
        });
        query_keys = [];

        if (rslt.continuation) {
            do_query(rslt.continuation);
        }
    }

    if (rslt.values.length &gt; 0) {
        Array.prototype.push.apply(query_keys,
            rslt.values.map(function (value) {
                return value.objectKey;
            }));
    }
}

do_query();
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index_range(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;tweets&quot;&gt;&gt;}, %% bucket type and bucket name
    {binary_index, &quot;hashtags&quot;}, %% index name
    &lt;&lt;&quot;ri&quot;&gt;&gt;, &lt;&lt;&quot;ru&quot;&gt;&gt;, %% range query from &quot;ri&quot; to &quot;ru&quot;
    {max_results, 5}
).
</code></pre>

<pre><code class="language-golang">func doPaginatedQuery(cluster *riak.Cluster, continuation []byte) error {
  builder := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;tweets&quot;).
    WithIndexName(&quot;hashtags_bin&quot;).
    WithRange(&quot;ri&quot;, &quot;ru&quot;).
    WithMaxResults(5)

  if continuation != nil &amp;&amp; len(continuation) &gt; 0 {
    builder.WithContinuation(continuation)
  }

  cmd, err := builder.Build()
  if err != nil {
    return err
  }

  if err := cluster.Execute(cmd); err != nil {
    return err
  }

  printIndexQueryResults(cmd)

  sciq := cmd.(*riak.SecondaryIndexQueryCommand)
  if sciq.Response == nil {
    return errors.New(&quot;[DevUsing2i] expected response but did not get one&quot;)
  }

  rc := sciq.Response.Continuation
  if rc != nil &amp;&amp; len(rc) &gt; 0 {
    return doPaginatedQuery(cluster, sciq.Response.Continuation)
  }

  return nil
}

func queryingPagination(cluster *riak.Cluster) error {
  return doPaginatedQuery(cluster, nil)
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/tweets/index/hashtags_bin/ri/ru?max_results=5&amp;return_terms=true
</code></pre>

<p>Here is an example JSON response (your client-specific response may differ):</p>

<pre><code class="language-json">{
  &quot;continuation&quot;: &quot;g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM=&quot;,
  &quot;results&quot;: [
    { &quot;rice&quot;: &quot;349222574510710785&quot; },
    { &quot;rickross&quot;: &quot;349222868095217664&quot; },
    { &quot;ridelife&quot;: &quot;349221819552763905&quot; },
    { &quot;ripjake&quot;: &quot;349220649341952001&quot; },
    { &quot;ripjake&quot;: &quot;349220687057129473&quot; }
  ]
}
</code></pre>

<p>Take the continuation value from the previous result set and feed it
back into the query.</p>

<pre><code class="language-java">Namespace tweetsBucket = new Namespace(&quot;indexes&quot;, &quot;tweets&quot;);
BinIndexQuery biq = new BinIndexQuery.Builder(tweetsBucket, &quot;hashtags&quot;, &quot;ri&quot;, &quot;ru&quot;)
        .withContinuation(BinaryValue.create(&quot;g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM&quot;))
        .withMaxResults(5)
        .withKeyAndIndex(true)
        .build();
BinIndexQuery.Response response = client.execute(biq);
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('tweets')
bucket.get_index(
  'hashtags_bin',
  'ri'..'ru',
  continuation: 'g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM',
  max_results: 5,
  return_terms: true
)
</code></pre>

<pre><code class="language-php">(new \Basho\Riak\Command\Builder\QueryIndex($riak))
  -&gt;buildBucket('tweets', 'indexes')
  -&gt;withIndexName('hashtags')
  -&gt;withRangeValue('ri', 'ru')
  -&gt;withMaxResults(5)
  -&gt;withContinuation('g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM')
  -&gt;build()
  -&gt;execute()
  -&gt;getResults();
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('tweets')
bucket.get_index(
    'hashtags_bin',
    'ri', 'ru',
    continuation='g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM',
    max_results=5,
    return_terms=True
)
</code></pre>

<pre><code class="language-csharp">// rslt is the previous 2i fetch result
var idxId = new RiakIndexId(&quot;indexes&quot;, &quot;tweets&quot;, &quot;hashtags&quot;);
var options = new RiakIndexGetOptions();
options.SetMaxResults(5);
options.SetContinuation(rslt.Continuation);
rslt = client.GetSecondaryIndex(idxId, &quot;ri&quot;, &quot;ru&quot;, options);
</code></pre>

<pre><code class="language-javascript">// See above example
</code></pre>

<pre><code class="language-erlang">{ok, Results} = riakc_pb_socket:get_index_range(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;tweets&quot;&gt;&gt;}, %% bucket type and bucket name
    {binary_index, &quot;hashtags&quot;}, %% index name
    &lt;&lt;&quot;ri&quot;&gt;&gt;, &lt;&lt;&quot;ru&quot;&gt;&gt;, %% range query from &quot;ri&quot; to &quot;ru&quot;
    [
        {continuation, &lt;&lt;&quot;g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM&quot;&gt;&gt;},
        {max_results, 5},
        {return_terms, true}
    ]
).
</code></pre>

<pre><code class="language-golang">// See above example
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/tweets/index/hashtags_bin/ri/ru?continuation=g2gCbQAAAAdyaXBqYWtlbQAAABIzNDkyMjA2ODcwNTcxMjk0NzM=&amp;max_results=5&amp;return_terms=true
</code></pre>

<p>The result:</p>

<pre><code class="language-json">{
  &quot;continuation&quot;: &quot;g2gCbQAAAAlyb2Jhc2VyaWFtAAAAEjM0OTIyMzcwMjc2NTkxMjA2NQ==&quot;,
  &quot;results&quot;: [
    {
      &quot;ripjake&quot;: &quot;349221198774808579&quot;
    },
    {
      &quot;ripped&quot;: &quot;349224017347100672&quot;
    },
    {
      &quot;roadtrip&quot;: &quot;349221207155032066&quot;
    },
    {
      &quot;roastietime&quot;: &quot;349221370724491265&quot;
    },
    {
      &quot;robaseria&quot;: &quot;349223702765912065&quot;
    }
  ]
}
</code></pre>

<h3 id="streaming">Streaming</h3>

<p>It is also possible to stream results:</p>

<pre><code class="language-java">// Available in Riak Java Client 2.1.0 and later
int pollTimeoutMS = 200;
Namespace ns = new Namespace(&quot;indexes&quot;, &quot;tweets&quot;);
String indexName = &quot;hashtags&quot;;

BinIndexQuery indexQuery =
    new BinIndexQuery.Builder(ns, indexName, &quot;ri&quot;, &quot;ru&quot;).build();

final RiakFuture&lt;BinIndexQuery.StreamingResponse, BinIndexQuery&gt; streamingFuture =
    client.executeAsyncStreaming(indexQuery, pollTimeoutMS);

// For streaming commands, the future's value will be available before
// the future is complete, so you may begin to pull results from the
// provided iterator as soon as possible.
final BinIndexQuery.StreamingResponse streamingResponse = streamingFuture.get();

for (BinIndexQuery.Response.Entry e : streamingResponse)
{
    // Do something with key...
}

streamingFuture.await();
Assert.assertTrue(streamingFuture.isDone());
</code></pre>

<pre><code class="language-ruby">bucket = client.bucket_type('indexes').bucket('people')
bucket.get_index('myindex_bin', 'foo', stream: true)
</code></pre>

<pre><code class="language-php">/*
  It is not currently possible to stream results using the PHP client
*/
</code></pre>

<pre><code class="language-python">bucket = client.bucket_type('indexes').bucket('people')
keys = []
for key in bucket.stream_index('myindex_bin', 'foo'):
    keys.append(key)
</code></pre>

<pre><code class="language-csharp">var riakIndexId = new RiakIndexId(&quot;indexes&quot;, &quot;tweets&quot;, &quot;hashtags&quot;);
var indexRiakResult = client.StreamGetSecondaryIndex(riakIndexId, &quot;ri&quot;, &quot;ru&quot;);
var indexResult = indexRiakResult.Value;
foreach (var key in indexResult.IndexKeyTerms)
{
    // Do something with key...
}
</code></pre>

<pre><code class="language-javascript">var binIdxCmd = new Riak.Commands.KV.SecondaryIndexQuery.Builder()
    .withBucketType('indexes')
    .withBucket('tweets')
    .withIndexName('hashtags_bin')
    .withRange('ri', 'ru')
    .withStreaming(true);
    .withCallback(query_cb) // See query_cb in other examples
    .build();
client.execute(binIdxCmd);
</code></pre>

<pre><code class="language-erlang">{ok, KeyStream} = riakc_pb_socket:get_index_eq(
    Pid,
    {&lt;&lt;&quot;indexes&quot;&gt;&gt;, &lt;&lt;&quot;people&quot;&gt;&gt;}, %% bucket type and bucket name
    {binary_index, &quot;myindex&quot;}, %% index name and type
    &lt;&lt;&quot;foo&quot;&gt;&gt;, %% value of the index
    [{stream, true}] %% enable streaming
).
</code></pre>

<pre><code class="language-golang">cmd, err := riak.NewSecondaryIndexQueryCommandBuilder().
    WithBucketType(&quot;indexes&quot;).
    WithBucket(&quot;tweets&quot;).
    WithIndexName(&quot;hashtags_bin&quot;).
    WithRange(&quot;ri&quot;, &quot;ru&quot;).
    WithStreaming(true).
    WithCallback(streamingCallback).
    Build()
if err != nil {
    return err
}

if err := cluster.Execute(cmd); err != nil {
    return err
}
</code></pre>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/people/index/myindex_bin/foo?stream=true
</code></pre>

<p>Streaming can also be combined with <code>pagination</code> and <code>return_terms</code>.</p>

<h3 id="sorting">Sorting</h3>

<p>As of Riak 1.4, the result set is sorted on index values (when executing
range queries) and object keys. See the pagination example above: hash
tags (2i keys) are returned in ascending order, and the object keys
(Twitter IDs) for the messages which contain the <code>ripjake</code> hash tag are
also returned in ascending order.</p>

<h3 id="retrieve-all-bucket-keys-via-the-bucket-index">Retrieve all Bucket Keys via the <code>$bucket</code> Index</h3>

<p>The following example retrieves the keys for all objects stored in the
bucket <code>people</code> using an exact match on the special <code>$bucket</code> index.</p>

<pre><code class="language-curl">curl localhost:8098/types/indexes/buckets/people/index/\$bucket/_
</code></pre>

<h3 id="count-bucket-objects-via-bucket-index">Count Bucket Objects via $bucket Index</h3>

<p>The following example performs a secondary index lookup on the $bucket
index like in the previous example and pipes this into a MapReduce that
counts the number of records in the <code>people</code> bucket. In order to
improve efficiency, the batch size has been increased from the default
size of 20.</p>

<pre><code class="language-curl">curl -XPOST localhost:8098/mapred\
  -H &quot;Content-Type: application/json&quot; \
  -d @-&lt;&lt;EOF
{
  &quot;inputs&quot;: {
    &quot;bucket&quot;: &quot;people&quot;,
    &quot;index&quot;: &quot;\$bucket&quot;,
    &quot;key&quot;:&quot;people&quot;
  },
  &quot;query&quot;: [
    {
      &quot;reduce&quot;: {
        &quot;language&quot;: &quot;erlang&quot;,
        &quot;module&quot;: &quot;riak_kv_mapreduce&quot;,
        &quot;function&quot;: &quot;reduce_count_inputs&quot;,
        &quot;arg&quot;: {
          &quot;reduce_phase_batch_size&quot;:1000
        }
      }
    }
  ]
}
EOF
</code></pre>

      </main>


    </article>


    <footer class="footer">

  <div class="inline-block   footer__attributions">

    <p>
      This work is licensed under a
      <br class="[bs] hidden-md-up">
      <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        Creative Commons Attribution 4.0 <br class="[bs] hidden-sm-up"> International Public License
      </a>
    </p>

    <p>
      © 2011-2017&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
    </p>

  </div>

</footer>



  </div>


  <script src="//evadne.github.io/basho_docs/js/main.js" type="text/javascript"></script>

</body>
</html>
