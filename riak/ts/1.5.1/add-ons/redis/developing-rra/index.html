<!DOCTYPE html>







<html class="no-js" lang="en">




<head>

  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width">
  <link rel="shortcut icon" href="//evadne.github.io/basho_docs/images/branding/favicon.ico" type="image/x-icon" />

  <title>Developing with Riak Redis Add-on</title>

  <link href="//evadne.github.io/basho_docs/css/main.css" media="screen" rel="stylesheet" type="text/css">
  <link rel="canonical" href="//evadne.github.io/basho_docs/riak/ts/latest/add-ons/redis/developing-rra/" />
  <!-- The below meta tags are included to allow JS code to use variables
       defined in Hugo---our static site generator. -->
  <meta name="project" content="riak_ts">
  <meta name="version" content="1.5.1">
  <meta name="project_relative_path" content="add-ons/redis/developing-rra/">

</head>



<body class="riak_ts 1.5.1  ">


  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T9C8MK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-T9C8MK');</script>


  
<header class="banner">



  
  <div class="float-right   banner__menu-bars   [bs] hidden-md-up">
    <div class="menu-bars   js_toggle-content-nav"></div>
  </div>



  
  <div class="float-left   banner__docs-logo">
    <a href="//evadne.github.io/basho_docs/index.html" class="block   docs-logo"><img class="docs-logo__image" src="//evadne.github.io/basho_docs/images/branding/basho_docs_logo.png"></a>
  </div>



  
  <div class="overflow-hidden   banner__navigation-pane   [bs] hidden-sm-down">


    
    <div class="float-left    banner__intra-brand__width-wrapper">
    <div class="float-right   banner__intra-brand">
      <div class="float-right">
        
        <a class="inline-block   banner__brand-link" href="http://basho.com/">Basho</a><a class="inline-block   banner__brand-link" href="https://academy.basho.com">Academy</a><a class="inline-block   banner__brand-link" href="//evadne.github.io/basho_docs/community">Community</a><a class="inline-block   banner__brand-link" href="http://basho.com/contact">Contact</a></div>
    </div>
    </div>




    
    <div class="float-left    banner__intra-site__width-wrapper">
    <div class="float-right   banner__intra-site">
      
      <a class="inline-block   banner__brand-link " href="//evadne.github.io/basho_docs/riak/kv/latest/">Riak KV</a><a class="inline-block   banner__brand-link banner__brand-link--current">Riak TS</a><a class="inline-block   banner__brand-link " href="//evadne.github.io/basho_docs/riak/cs/latest/">Riak CS</a></div>
    </div>


  </div>

</header>



  
  



<nav class="content-nav content-nav--top-size-full">




  <div class="content-nav__fixed-top">
    <form id="searchbox_011972015458788978446:zgdcy4fa-o0" class="search" action="">

      <span class="block float-left   search__icon-container   docs-icon--search">|</span>

      <span class="block overflow">
        <input class="search__input" id="main-search" type="search" name="q" placeholder="Search">
      </span>

    </form>


    <div class="clearfix   version-picker">

  
      <a class="inline-block float-left    product__title" href="//evadne.github.io/basho_docs/"><img class="product__logo" src="//evadne.github.io/basho_docs/images/branding/riak-logo.png">Riak<span class="product__title-highlight">TS</span>
      </a>
  

      <div class="inline-block float-right   selector selector--version">
        <header class="selector__title">Versions</header>
        <button class="selector__btn" type="button">1.5.1</button>
        <div    class="selector__arrow"></div>
      </div>

    </div>


  </div>


  
  <div class="overflow-y-hidden   selector-pane__sizing-box selector-pane__sizing-box--hidden">
  <div class="                    selector-pane__shadow-box">

    
    <div class="edge-fader edge-fader--left">
      <span class="inline-block   edge-fader__arrow edge-fader__arrow--invisible"></span>
    </div>
    <div class="edge-fader edge-fader--right">
      <span class="inline-block   edge-fader__arrow edge-fader__arrow--invisible"></span>
    </div>

    <div class="overflow-x        selector-pane__primary selector-pane--versions  js_edge-fader--target">
      
    </div>
  </div>
  </div>




  
  <div class="             content-nav__primary__sizing-box">
  <div class="             content-nav__primary__shadow-box">
  <div class="overflow-y   content-nav__primary">

    <div class="content-nav__menu-container">

      <ul class="content-menu
                 content-menu--depth-0
                 content-menu--open">


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--riak">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/" >
              <span class="block   content-menu__item__right-border"><strong>Riak TS</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/releasenotes/" >
        <span class="block   content-menu__item__right-border">Release Notes</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li class="content-menu__download-entry">

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--download-alt">|</span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/downloads/" >
              <span class="block   content-menu__item__right-border"><strong>Download Riak TS</strong></span>
            </a>

          </div>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--install">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/" >
              <span class="block   content-menu__item__right-border"><strong>Setup</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/" >
        <span class="block   content-menu__item__right-border">Install</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/debian-ubuntu/" >
        <span class="block   content-menu__item__right-border">Debian and Ubuntu</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/mac-osx/" >
        <span class="block   content-menu__item__right-border">Mac OS X</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/rhel-centos/" >
        <span class="block   content-menu__item__right-border">CentOS/RHEL</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/aws/" >
        <span class="block   content-menu__item__right-border">AWS Marketplace</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/source/" >
        <span class="block   content-menu__item__right-border">Source</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/installing/source/erlang/" >
        <span class="block   content-menu__item__right-border">Erlang</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/upgrading/" >
        <span class="block   content-menu__item__right-border">Upgrade</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/setup/downgrading/" >
        <span class="block   content-menu__item__right-border">Downgrade</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--cog">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/configuring/" >
              <span class="block   content-menu__item__right-border"><strong>Configure</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/configuring/riakconf/" >
        <span class="block   content-menu__item__right-border">riak.conf</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/configuring/mdc/" >
        <span class="block   content-menu__item__right-border">Multi-Datacenter Replication</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/configuring/global-object-expiration/" >
        <span class="block   content-menu__item__right-border">Global Object Expiration</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--database">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/" >
              <span class="block   content-menu__item__right-border"><strong>Use</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/core-fundamentals/" >
        <span class="block   content-menu__item__right-border">Core Fundamentals</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/planning/" >
        <span class="block   content-menu__item__right-border">Plan Your Table</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/timerepresentations/" >
        <span class="block   content-menu__item__right-border">Time Representations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/creating-activating/" >
        <span class="block   content-menu__item__right-border">Create Your Table</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/writingdata/" >
        <span class="block   content-menu__item__right-border">Write Data</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/deleting-data/" >
        <span class="block   content-menu__item__right-border">Delete Data</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/" >
        <span class="block   content-menu__item__right-border">Query Data</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/reference/" >
        <span class="block   content-menu__item__right-border">SQL Reference</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/select/" >
        <span class="block   content-menu__item__right-border">SELECT</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/select/group-by/" >
        <span class="block   content-menu__item__right-border">GROUP BY</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/select/order-by/" >
        <span class="block   content-menu__item__right-border">ORDER BY</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/select/limit/" >
        <span class="block   content-menu__item__right-border">LIMIT</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/select/arithmetic-operations/" >
        <span class="block   content-menu__item__right-border">Arithmetic Operations</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/select/aggregate-functions/" >
        <span class="block   content-menu__item__right-border">Aggregate Functions</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/delete/" >
        <span class="block   content-menu__item__right-border">DELETE</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/describe/" >
        <span class="block   content-menu__item__right-border">DESCRIBE</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/show-tables/" >
        <span class="block   content-menu__item__right-border">SHOW TABLES</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/show-create-table/" >
        <span class="block   content-menu__item__right-border">SHOW CREATE TABLE</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/explain/" >
        <span class="block   content-menu__item__right-border">EXPLAIN</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/guidelines/" >
        <span class="block   content-menu__item__right-border">Querying Guidelines</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/querying/single-key-fetch/" >
        <span class="block   content-menu__item__right-border">Single Key Fetch</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/riakshell/" >
        <span class="block   content-menu__item__right-border">riak shell</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/security/" >
        <span class="block   content-menu__item__right-border">Security</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/security/checklist/" >
        <span class="block   content-menu__item__right-border">Security Checklist</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/security/enable-disable/" >
        <span class="block   content-menu__item__right-border">Security: Enable &amp; Disable</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/security/user-management/" >
        <span class="block   content-menu__item__right-border">User Management</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/security/sources-management/" >
        <span class="block   content-menu__item__right-border">Sources Management</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/using/security/notify-basho/" >
        <span class="block   content-menu__item__right-border">Notifying Basho</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--lambda">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/" >
              <span class="block   content-menu__item__right-border"><strong>Develop</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/csharp/" >
        <span class="block   content-menu__item__right-border">C#</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/erlang/" >
        <span class="block   content-menu__item__right-border">Erlang</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/golang/" >
        <span class="block   content-menu__item__right-border">Go</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/http/" >
        <span class="block   content-menu__item__right-border">HTTP</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/java/" >
        <span class="block   content-menu__item__right-border">Java</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/nodejs/" >
        <span class="block   content-menu__item__right-border">Node.js</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/php/" >
        <span class="block   content-menu__item__right-border">PHP</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/python/" >
        <span class="block   content-menu__item__right-border">Python</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/developing/ruby/" >
        <span class="block   content-menu__item__right-border">Ruby</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--tools">|</span>
            <span class="block float-right   content-menu__menu-toggle
                         content-menu__menu-toggle--open ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/" >
              <span class="block   content-menu__item__right-border"><strong>Add-ons</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           content-menu--open"
    style="display: block">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/" >
        <span class="block   content-menu__item__right-border">Spark-Riak Connector</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/quick-start/" >
        <span class="block   content-menu__item__right-border">Quick Start Guide</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/getting/" >
        <span class="block   content-menu__item__right-border">Get Spark-Riak Connector</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/building-testing/" >
        <span class="block   content-menu__item__right-border">Building &amp; Testing</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/" >
        <span class="block   content-menu__item__right-border">Usage</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/config-spark-context/" >
        <span class="block   content-menu__item__right-border">Spark Context Configuration</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/reading-data/" >
        <span class="block   content-menu__item__right-border">Reading Data</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/writing-data/" >
        <span class="block   content-menu__item__right-border">Writing Data</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/dataframes/" >
        <span class="block   content-menu__item__right-border">Working With Spark Dataframes</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/dates/" >
        <span class="block   content-menu__item__right-border">Working With TS Dates</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/range-query-partition/" >
        <span class="block   content-menu__item__right-border">TS Table Range Query Partitioning</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/bulk-write/" >
        <span class="block   content-menu__item__right-border">Bulk Write</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/spark-riak-connector/usage/streaming-example/" >
        <span class="block   content-menu__item__right-border">Spark Streaming Example</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                   content-menu__menu-toggle--open ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/redis/" >
        <span class="block   content-menu__item__right-border">Redis Add-on</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           content-menu--open"
    style="display: block">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/redis/set-up-rra/" >
        <span class="block   content-menu__item__right-border">Set Up Redis Add-on</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/redis/set-up-rra/deployment-models/" >
        <span class="block   content-menu__item__right-border">Redis Add-on Deployment Models</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/redis/using-rra/" >
        <span class="block   content-menu__item__right-border">Using Redis Add-on</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item  content-menu__item--selected ">

      <a class="block overflow   content-menu__link--depth-2" >
        <span class="block   content-menu__item__right-border">Develop with Redis Add-on</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/add-ons/redis/redis-add-on-features/" >
        <span class="block   content-menu__item__right-border">Redis Add-on Features</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--beaker">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/learn-about/" >
              <span class="block   content-menu__item__right-border"><strong>Learn</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/learn-about/bestpractices/" >
        <span class="block   content-menu__item__right-border">Best Practices</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/learn-about/sqlriakts/" >
        <span class="block   content-menu__item__right-border">SQL for Riak TS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/learn-about/tablearchitecture/" >
        <span class="block   content-menu__item__right-border">Table Architecture </span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/ts/1.5.1/learn-about/timestamps/" >
        <span class="block   content-menu__item__right-border">Timestamps</span>
      </a>

    </div>

  </li>



</ul>

        </li>

        <li class="content-menu__blank-entry"></li>

      </ul>

    </div>



    <div class="content-nav__fixed-bottom">

      <ul class="content-menu">

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--comments">|</span>

            <a class="block overflow" href="//evadne.github.io/basho_docs/community">
              <span class="block   content-menu__item__right-border">
                <sub>Want some extra help?</sub><br>
                <strong>Ask our Community</strong>
              </span>
            </a>

          </div>
        </li>

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--question-sign">|</span>

            <a class="block overflow" href="http://basho.com/contact">
              <span class="block   content-menu__item__right-border">
                <sub>Need to chat?</sub><br>
                <strong>Contact us directly</strong>
              </span>
            </a>

          </div>
        </li>

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--github-alt">|</span>

            <a class="block overflow" href="https://github.com/basho/basho_docs/edit/master/content/riak/ts/1.5.1/add-ons/redis/developing-rra.md">
              <span class="block   content-menu__item__right-border">
                <sub>Noticed a typo?</sub><br>
                <strong>Correct it in GitHub</strong>
              </span>
            </a>

          </div>
        </li>

      </ul>

    </div>

  </div>
  </div>
  </div>



</nav>

<script>
  (function() {
    var cx = '011972015458788978446:zgdcy4fa-o0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div style="width:0px;overflow:hidden;height:0px;">
  <gcse:search></gcse:search>
</div>






  <div class="content-well">


    <article class="main-article">


      

<header class="front-matter">


  <h1 class="front-matter__title">

    
    <br>
    Developing with Riak Redis Add-on

  </h1>
  <nav class="table-of-contents"></nav>


</header>


      <main>
        

<p>This page will walk you through setting up your environment for development with Riak Redis Add-on (RRA), as well as present examples and configuration parameters for basic development operations.</p>

<h2 id="overview">Overview</h2>

<p>Riak Redis Add-on (RRA) packages a cache proxy service. The cache proxy service provides accessibility to Riak TS, as a persistent data store, with Redis, as a cache through the various Redis client libraries and command-line interface tool <code>redis-cli</code>.</p>

<p>As with Riak TS, the cache proxy service almost always performs best and most
predictably when you use the basic CRUD operations &ndash; Create, Read, Update,
Delete &ndash; that you&rsquo;d find in any key/value store. Learning these operations
is a great place to start when beginning to develop applications that use
RRA.</p>

<p>The set of clients (including recommendations) for Redis are listed at
<a href="http://redis.io/clients">Redis clients</a>. For brevity sake, examples provided here are
in:</p>

<ul>
<li>Erlang (Eredis)</li>
<li>Javascript (node_redis)</li>
<li>Python (redis-py)</li>
<li>Ruby (redis-rb)</li>
<li>Scala (lettuce)</li>
<li>Java, see the Scala examples. The code intentionally uses as few Scala tricks as possible to focus on the use of the Redis client.</li>
</ul>

<h2 id="riak-ts-setup">Riak TS Setup</h2>

<p>While you can use Riak Redis Add-on with Riak TS configured so either <code>last_write_wins</code> is set to &lsquo;true&rsquo; or <code>allow_mult</code> is set to &lsquo;true&rsquo;, we recommend using the  <code>allow_mult</code> setting in order to provide client sibling resolution in the event of a network partition. The examples and instructions on this page will assume <code>allow_mult</code> is set to &lsquo;true&rsquo;.</p>

<p>The cache proxy service is tested under both configurations. However, due to lack of support via the Redis protocol for returning multiple values for a single <code>GET</code>, effectively <code>last_write_wins</code> semantics apply.</p>

<p>For a deeper explanation of Riak TS&rsquo;s configurable behaviors, see John Daily&rsquo;s
blog series <a href="http://basho.com/posts/technical/riaks-config-behaviors-part-4/">part 4</a> .</p>

<h3 id="bucket-type-setup">Bucket Type Setup</h3>

<h4 id="create-a-bucket-type">Create a Bucket Type</h4>

<p>If your application organizes data in a way that does not include bucket-type
and instead only uses bucket to organize its keyspace, the <code>default</code> bucket-type
can be used by omitting the bucket-type portion of the colon-delimited
hierarchical namespaced key. Otherwise said, <code>test:food</code> is equivalent to
<code>default:test:food</code> where the bucket-type is <code>default</code>, the bucket is <code>test</code>,
and the key is <code>food</code>. For examples here, we will use <code>rra:test:food</code> to clearly
use a bucket-type.</p>

<p>If your application organizes data including a bucket-type, ensure that that
bucket-type is created in Riak without specifying the data type, so effectively
an opaque value, ie a <code>string</code>. The following command provides an example of
creating the bucket-type <code>rra</code>:</p>

<pre><code class="language-sh">if ! riak-admin bucket-type status rra &gt;/dev/null 2&gt;&amp;1; then
    riak-admin bucket-type create rra '{&quot;props&quot;:{}}'
    riak-admin bucket-type activate rra
fi
</code></pre>

<h4 id="set-bucket-props">Set Bucket Props</h4>

<p>The following is an example, using Riak TS&rsquo;s default HTTP port, of setting <code>allow_mult</code> to &lsquo;true&rsquo; and <code>last_write_wins</code> to &lsquo;false&rsquo;:</p>

<pre><code class="language-sh">curl -XPUT -H 'Content-Type: application/json' \
         -d '{&quot;props&quot;: {&quot;allow_mult&quot;: true, &quot;last_write_wins&quot;: false}}' \
         'http://127.0.0.1:8098/types/rra/buckets/test/props'
</code></pre>

<p>For additional configuration options see <a href="//evadne.github.io/basho_docs/riak/kv/2.2.0/developing/api/http">bucket properties</a>.</p>

<h2 id="object-key-operations">Object/Key Operations</h2>

<p>Riak TS organizes data into buckets, keys, and values, with
<a href="//evadne.github.io/basho_docs/riak/kv/2.2.0/developing/usage/bucket-types/">bucket types</a> acting as an additional namespace in Riak TS
versions 1.0 and greater. Values, which we&rsquo;ll refer to as objects, are identifiable by a unique key, and each key/value pair is stored in a bucket.</p>

<p>Objects accessed via the cache proxy service in Riak Redis Add-on are restricted to plaintext format. This plaintext format may be a simple string, JSON, XML, or other plaintext representations that can be parsed in the client application (e.g. YAML).</p>

<p>While buckets are a flat namespace in Riak TS and you can name them
whatever you&rsquo;d like (<code>bucket</code> or <code>a90bf521c</code> or <code>___</code>), within the cache proxy
service, Redis bucket_type:bucket:key is mapped to Riak TS
bucket_type/bucket/key, so bucket type and bucket names should not contain
colon (<code>:</code>). When not specified, bucket type defaults to &ldquo;default&rdquo;.</p>

<p>Outside of the above restriction, bucket names have no intrinsic significance beyond allowing you to store objects with the same key in different buckets.</p>

<p>The same goes for naming keys: many objects can have the same key as long as they&rsquo;re in different buckets. There is no restriction on key containing colon (<code>:</code>), and this practice of representing a nested namespace is common in applications using Redis.</p>

<p>Riak TS <a href="//evadne.github.io/basho_docs/riak/kv/2.2.0/developing/usage/bucket-types/">bucket types</a> enable you to provide common
configurations for buckets (as many buckets as you wish). This means you can
easily enable buckets to share common configurations, i.e. identical
<a href="//evadne.github.io/basho_docs/riak/kv/2.2.0/developing/app-guide/replication-properties">replication properties</a> or
<a href="//evadne.github.io/basho_docs/riak/kv/2.2.0/developing/usage/commit-hooks/">commit hooks</a>.</p>

<h2 id="reading-objects">Reading Objects</h2>

<p>Reads via the cache proxy service are analogous to a Redis <code>GET</code>, with the added benefit of reading-through to Riak TS which results in greater resilience through node outages and network partitions.</p>

<p>To request a value at a bucket/key in Riak TS, issue the following:</p>

<pre><code class="language-erlang">{ok, RedisClientPid} = eredis:start_link(&quot;127.0.0.1&quot;, 22122).
{ok, Value} = eredis:q(RedisClientPid, [&quot;GET&quot;, &quot;rra:test:food&quot;]).
</code></pre>

<pre><code class="language-javascript">var redis = require(&quot;redis&quot;),
    client = redis.createClient(22122, &quot;127.0.0.1&quot;);

client.get(&quot;rra:test:food&quot;, redis.print);
</code></pre>

<pre><code class="language-python">import redis

r = redis.StrictRedis(host=&quot;127.0.0.1&quot;, port=22122)

r.get(&quot;rra:test:food&quot;)
</code></pre>

<pre><code class="language-ruby">require &quot;redis&quot;

redis = Redis.new(host: &quot;127.0.0.1&quot;, port: 22122)

redis.get(&quot;rra:test:food&quot;)
</code></pre>

<pre><code class="language-scala">import com.lambdaworks.redis._

var client = RedisClient.create(&quot;redis://127.0.0.1:22122&quot;)
var connection = client.connect()

var value = connection.get(&quot;rra:test:food&quot;)
</code></pre>

<h3 id="get-configuration-parameters">Get Configuration Parameters</h3>

<blockquote>
<p><strong>Note:</strong> The cache proxy service read option (related to replication factor and
consistency concern) may optionally be set within the nutcracker.conf. This will  result in an override of the setting value at the bucket-level in Riak TS.</p>
</blockquote>

<p>The following configuration parameters apply to <code>GET</code> and may be set within the
RRA configuration file <code>/etc/cache_proxy/cache_proxy_22122.yml</code>:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>n_val</code></td>
<td>The number of replicas for objects in a bucket. The <code>n_val</code> should be an integer greater than 0 and less than or equal to the number of nodes in the cluster.<br /><br /><strong>NOTE</strong>: If you change the <code>n_val</code> after keys have been added to the bucket it may result in failed reads, as the new value may not be replicated to all of the appropriate partitions.</td>
<td><code>3</code></td>
</tr>

<tr>
<td><code>pr</code></td>
<td>How many vnodes must respond for a read to be deemed successful.</td>
<td><code>0</code></td>
</tr>

<tr>
<td><code>r</code></td>
<td>How many replicas need to agree when retrieving an existing object before responding.</td>
<td><code>2</code></td>
</tr>

<tr>
<td><code>basic_quorum</code></td>
<td>Whether to return early in some failure cases, e.g. when <code>r</code>=1 and you get 2 errors and a success.</td>
<td><code>0</code> (false)</td>
</tr>

<tr>
<td><code>sloppy_quorum</code></td>
<td>Whether to treat vnodes holding values for another vnode as acceptable within the quorum determination.</td>
<td><code>0</code> (false)</td>
</tr>

<tr>
<td><code>notfound_ok</code></td>
<td>Whether to treat notfounds as successful reads for the purpose of <code>r</code>.</td>
<td>1 (true)</td>
</tr>

<tr>
<td><code>timeout</code></td>
<td>The number of milliseconds to await a response.</td>
<td><code>0</code> (server specified)</td>
</tr>
</tbody>
</table>

<h3 id="sibling-resolution">Sibling Resolution</h3>

<p>As the Redis protocol does not provide a means to return multiple siblings,
the cache proxy service must provide server-side sibling resolution. At present, only last-write-wins sibling resolution is available. The result is an effective
last-write-wins configuration for access through the cache proxy service.</p>

<h2 id="writing-objects">Writing Objects</h2>

<p>Writes via the cache proxy service are analogous to a Redis <code>SET</code>, with the added
benefit of writing to Riak TS followed by a <code>PEXPIRE</code> to Redis, invalidating
cache. As with HTTP PUT, <code>SET</code> semantically covers both create and update
operations.</p>

<p>To set a value at a bucket/key in Riak TS, issue the following:</p>

<pre><code class="language-erlang">{ok, RedisClientPid} = eredis:start_link(&quot;127.0.0.1&quot;, 22122).
{ok, KeysAffected} = eredis:q(RedisClientPid, [&quot;SET&quot;, &quot;rra:test:food&quot;, &quot;apple&quot;]).
</code></pre>

<pre><code class="language-javascript">var redis = require(&quot;redis&quot;),
    client = redis.createClient(22122, &quot;127.0.0.1&quot;);

client.set(&quot;rra:test:food&quot;, &quot;apple&quot;, redis.print);
</code></pre>

<pre><code class="language-python">import redis

r = redis.StrictRedis(host=&quot;127.0.0.1&quot;, port=22122)

r.set(&quot;rra:test:food&quot;, &quot;apple&quot;)
</code></pre>

<pre><code class="language-ruby">require &quot;redis&quot;

redis = Redis.new(host: &quot;127.0.0.1&quot;, port: 22122)

redis.set(&quot;rra:test:food', 'apple&quot;)
</code></pre>

<pre><code class="language-scala">import com.lambdaworks.redis._

var client = RedisClient.create(&quot;redis://127.0.0.1:22122&quot;)
var connection = client.connect()

connection.set(&quot;rra:test:food&quot;, &quot;apple&quot;)
</code></pre>

<h3 id="set-configuration-parameters">Set Configuration Parameters</h3>

<blockquote>
<p><strong>Note:</strong> The cache proxy service write option (related to replication factor and
consistency concern) may optionally be set within the nutcracker.conf, resulting
in an override of the setting value at the bucket-level in Riak TS.</p>
</blockquote>

<p>The following configuration parameters apply to <code>SET</code> and may be set within the
RRA configuration file <code>/etc/cache_proxy/cache_proxy_22122.yml</code>:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>n_val</code></td>
<td>The number of replicas for objects in a bucket. The <code>n_val</code> should be an integer greater than 0 and less than or equal to the number of nodes in the cluster.<br /><br /><strong>NOTE</strong>: If you change the <code>n_val</code> after keys have been added to the bucket it may result in failed reads, as the new value may not be replicated to all of the appropriate partitions.</td>
<td><code>3</code></td>
</tr>

<tr>
<td><code>pw</code></td>
<td>How many vnodes must respond for a write to be deemed successful.</td>
<td><code>0</code></td>
</tr>

<tr>
<td><code>w</code></td>
<td>How many replicas need to acknowledge the write before responding.</td>
<td><code>2</code></td>
</tr>

<tr>
<td><code>sloppy_quorum</code></td>
<td>Whether to treat vnodes holding values for another vnode as acceptable within the quorum determination.</td>
<td><code>0</code> (false)</td>
</tr>
</tbody>
</table>

<h3 id="sibling-explosion">Sibling Explosion</h3>

<p>As noted in the section &ldquo;Sibling Resolution&rdquo; above, Riak TS provides for a line of
descendency (known as the [causal context][<a href="//evadne.github.io/basho_docs/riak/kv/2.2.0/learn/concepts/causal-context">concept causal context</a>]) for a value stored at a key. Clients
performing write operations provide this causal context by setting the vector
clock (VClock) that they last read.</p>

<p>If a client does not provide the causal context, Riak TS makes no assumptions and treats the write as a new causal context, semantically equivalent to a
create. In the case that a value is already stored at the key, this would lead
to a sibling.</p>

<p>Since the Redis protocol does not provide a means to pass a VClock, the cache
proxy service needs to perform a read-before-write to obtain the current VClock so the write can continue the causal context previously established and avoid
&ldquo;sibling explosion&rdquo;.</p>

<p>Despite these efforts, in the event of a network partition, siblings will still
be created as clients writing to nodes on either side of the network partition
can create divergent lines of descendency. Sibling resolution remains the means
to merge these lines of descent into a coherent causal context.</p>

<h2 id="deleting-objects">Deleting Objects</h2>

<p>Deletes via the cache proxy service are analogous to a Redis <code>DEL</code>, with the added
benefit of writing to Riak TS followed by a <code>PEXPIRE</code> to Redis, invalidating
cache.</p>

<p>To delete a value at a bucket/key in Riak TS, issue the following:</p>

<pre><code class="language-erlang">{ok, RedisClientPid} = eredis:start_link(&quot;127.0.0.1&quot;, 22122).
{ok, KeysAffected} = eredis:q(RedisClientPid, [&quot;DEL&quot;, &quot;rra:test:food&quot;]).
</code></pre>

<pre><code class="language-javascript">var redis = require(&quot;redis&quot;),
    client = redis.createClient(22122, &quot;127.0.0.1&quot;);

client.del(&quot;rra:test:food&quot;, redis.print);
</code></pre>

<pre><code class="language-python">import redis

r = redis.StrictRedis(host=&quot;127.0.0.1&quot;, port=22122)

r.del(&quot;rra:test:food&quot;)
</code></pre>

<pre><code class="language-ruby">require &quot;redis&quot;

redis = Redis.new(host: &quot;127.0.0.1&quot;, port: 22122)

redis.del(&quot;rra:test:food&quot;)
</code></pre>

<pre><code class="language-scala">import com.lambdaworks.redis._

var client = RedisClient.create(&quot;redis://127.0.0.1:22122&quot;)
var connection = client.connect()

connection.del(&quot;rra:test:food&quot;)
</code></pre>

<h3 id="delete-configuration-parameters">Delete Configuration Parameters</h3>

<p>The following configuration parameters apply to <code>DEL</code> and may be set within the
RRA configuration file <code>/etc/cache_proxy/cache_proxy_22122.yml</code>:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>n_val</code></td>
<td>The number of replicas for objects in a bucket. The <code>n_val</code> should be an integer greater than 0 and less than or equal to the number of nodes in the cluster.<br /><br /><strong>NOTE</strong>: If you change the <code>n_val</code> after keys have been added to the bucket it may result in failed reads, as the new value may not be replicated to all of the appropriate partitions.</td>
<td><code>3</code></td>
</tr>

<tr>
<td><code>pw</code></td>
<td>How many vnodes must respond for a write to be deemed successful.</td>
<td><code>0</code></td>
</tr>

<tr>
<td><code>w</code></td>
<td>How many replicas need to acknowledge the write before responding.</td>
<td><code>2</code></td>
</tr>

<tr>
<td><code>sloppy_quorum</code></td>
<td>Whether to treat vnodes holding values for another vnode as acceptable within the quorum determination.</td>
<td><code>0</code> (false)</td>
</tr>
</tbody>
</table>

      </main>


    </article>


    <footer class="footer">

  <div class="inline-block   footer__attributions">

    <p>
      This work is licensed under a
      <br class="[bs] hidden-md-up">
      <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        Creative Commons Attribution 4.0 <br class="[bs] hidden-sm-up"> International Public License
      </a>
    </p>

    <p>
      © 2011-2017&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
    </p>

  </div>

</footer>



  </div>


  <script src="//evadne.github.io/basho_docs/js/main.js" type="text/javascript"></script>

</body>
</html>
