<!DOCTYPE html>







<html class="no-js" lang="en">




<head>

  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width">
  <link rel="shortcut icon" href="//evadne.github.io/basho_docs/images/branding/favicon.ico" type="image/x-icon" />

  <title>Monitoring and Metrics</title>

  <link href="//evadne.github.io/basho_docs/css/main.css" media="screen" rel="stylesheet" type="text/css">
  <link rel="canonical" href="//evadne.github.io/basho_docs/riak/cs/latest/cookbooks/monitoring-and-metrics/" />
  <!-- The below meta tags are included to allow JS code to use variables
       defined in Hugo---our static site generator. -->
  <meta name="project" content="riak_cs">
  <meta name="version" content="2.1.0">
  <meta name="project_relative_path" content="cookbooks/monitoring-and-metrics/">

</head>



<body class="riak_cs 2.1.0  ">


  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-T9C8MK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-T9C8MK');</script>


  
<header class="banner">



  
  <div class="float-right   banner__menu-bars   [bs] hidden-md-up">
    <div class="menu-bars   js_toggle-content-nav"></div>
  </div>



  
  <div class="float-left   banner__docs-logo">
    <a href="//evadne.github.io/basho_docs/index.html" class="block   docs-logo"><img class="docs-logo__image" src="//evadne.github.io/basho_docs/images/branding/basho_docs_logo.png"></a>
  </div>



  
  <div class="overflow-hidden   banner__navigation-pane   [bs] hidden-sm-down">


    
    <div class="float-left    banner__intra-brand__width-wrapper">
    <div class="float-right   banner__intra-brand">
      <div class="float-right">
        
        <a class="inline-block   banner__brand-link" href="http://basho.com/">Basho</a><a class="inline-block   banner__brand-link" href="https://academy.basho.com">Academy</a><a class="inline-block   banner__brand-link" href="//evadne.github.io/basho_docs/community">Community</a><a class="inline-block   banner__brand-link" href="http://basho.com/contact">Contact</a></div>
    </div>
    </div>




    
    <div class="float-left    banner__intra-site__width-wrapper">
    <div class="float-right   banner__intra-site">
      
      <a class="inline-block   banner__brand-link " href="//evadne.github.io/basho_docs/riak/kv/latest/">Riak KV</a><a class="inline-block   banner__brand-link " href="//evadne.github.io/basho_docs/riak/ts/latest/">Riak TS</a><a class="inline-block   banner__brand-link banner__brand-link--current">Riak CS</a></div>
    </div>


  </div>

</header>



  
  



<nav class="content-nav content-nav--top-size-full">




  <div class="content-nav__fixed-top">
    <form id="searchbox_011972015458788978446:zgdcy4fa-o0" class="search" action="">

      <span class="block float-left   search__icon-container   docs-icon--search">|</span>

      <span class="block overflow">
        <input class="search__input" id="main-search" type="search" name="q" placeholder="Search">
      </span>

    </form>


    <div class="clearfix   version-picker">

  
      <a class="inline-block float-left    product__title" href="//evadne.github.io/basho_docs/"><img class="product__logo" src="//evadne.github.io/basho_docs/images/branding/riak-logo.png">Riak<span class="product__title-highlight">CS</span>
      </a>
  

      <div class="inline-block float-right   selector selector--version">
        <header class="selector__title">Versions</header>
        <button class="selector__btn" type="button">2.1.0</button>
        <div    class="selector__arrow"></div>
      </div>

    </div>


  </div>


  
  <div class="overflow-y-hidden   selector-pane__sizing-box selector-pane__sizing-box--hidden">
  <div class="                    selector-pane__shadow-box">

    
    <div class="edge-fader edge-fader--left">
      <span class="inline-block   edge-fader__arrow edge-fader__arrow--invisible"></span>
    </div>
    <div class="edge-fader edge-fader--right">
      <span class="inline-block   edge-fader__arrow edge-fader__arrow--invisible"></span>
    </div>

    <div class="overflow-x        selector-pane__primary selector-pane--versions  js_edge-fader--target">
      
    </div>
  </div>
  </div>




  
  <div class="             content-nav__primary__sizing-box">
  <div class="             content-nav__primary__shadow-box">
  <div class="overflow-y   content-nav__primary">

    <div class="content-nav__menu-container">

      <ul class="content-menu
                 content-menu--depth-0
                 content-menu--open">


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--bolt">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/" >
              <span class="block   content-menu__item__right-border"><strong>Riak CS</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/downloads/" >
        <span class="block   content-menu__item__right-border">Download Riak CS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/installing/" >
        <span class="block   content-menu__item__right-border">Installing Riak CS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/installing/chef/" >
        <span class="block   content-menu__item__right-border">Installing With Chef</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/tutorials/fast-track/" >
        <span class="block   content-menu__item__right-border">The Riak CS Fast Track</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/tutorials/fast-track/what-is-riak-cs/" >
        <span class="block   content-menu__item__right-border">What Is Riak CS?</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/tutorials/fast-track/local-testing-environment/" >
        <span class="block   content-menu__item__right-border">Building a Local Test Environment</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/tutorials/fast-track/virtual-test-environment/" >
        <span class="block   content-menu__item__right-border">Building a Virtual Test Environment</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/tutorials/fast-track/test-installation/" >
        <span class="block   content-menu__item__right-border">Testing the Installation</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--lambda">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/developing/" >
              <span class="block   content-menu__item__right-border"><strong>Developing</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/appendices/http-admin/" >
        <span class="block   content-menu__item__right-border">Accounts &amp; Admin</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/account-management/" >
        <span class="block   content-menu__item__right-border">Account Management</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/access-control-lists/" >
        <span class="block   content-menu__item__right-border">Access Control Lists</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/authentication/" >
        <span class="block   content-menu__item__right-border">Authentication</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/usage-and-billing-data/" >
        <span class="block   content-menu__item__right-border">Usage and Billing Data</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/apis/" >
        <span class="block   content-menu__item__right-border">APIs</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/apis/storage/" >
        <span class="block   content-menu__item__right-border">Riak CS Storage API</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/apis/storage/s3/" >
        <span class="block   content-menu__item__right-border">S3 API</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/s3-client/" >
        <span class="block   content-menu__item__right-border">Configuring an S3 Client</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/fog/" >
        <span class="block   content-menu__item__right-border">Fog on Riak CS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/dragondisk/" >
        <span class="block   content-menu__item__right-border">Configuring DragonDisk</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/transmit/" >
        <span class="block   content-menu__item__right-border">Configuring Transmit</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/apis/storage/openstack/" >
        <span class="block   content-menu__item__right-border">OpenStack API</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-3
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-3"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/using-with-keystone/" >
        <span class="block   content-menu__item__right-border">Using Riak CS With Keystone</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/querying-access-statistics/" >
        <span class="block   content-menu__item__right-border">Access Statistics</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/querying-storage-statistics/" >
        <span class="block   content-menu__item__right-border">Storage Statistics</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--database">|</span>
            <span class="block float-right   content-menu__menu-toggle
                         content-menu__menu-toggle--open ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/operating/" >
              <span class="block   content-menu__item__right-border"><strong>Operating</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           content-menu--open"
    style="display: block">



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/" >
        <span class="block   content-menu__item__right-border">Configuring</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/riak-for-cs/" >
        <span class="block   content-menu__item__right-border">Configuring Riak KV for CS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/riak-cs/" >
        <span class="block   content-menu__item__right-border">Configuring Riak CS</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/stanchion/" >
        <span class="block   content-menu__item__right-border">Configuring Stanchion</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/load-balancing-proxy/" >
        <span class="block   content-menu__item__right-border">Load Balancing &amp; Proxy Configuration</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/reference/" >
        <span class="block   content-menu__item__right-border">Configuration Reference</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/operating/running/" >
        <span class="block   content-menu__item__right-border">Running</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/command-line-tools/" >
        <span class="block   content-menu__item__right-border">Command-line Tools</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/installing/launching-and-stopping/" >
        <span class="block   content-menu__item__right-border">Launching and Stopping</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/logging/" >
        <span class="block   content-menu__item__right-border">Logging</span>
      </a>

    </div>

  </li>



</ul>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                   content-menu__menu-toggle--open ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/operating/advanced/" >
        <span class="block   content-menu__item__right-border">Advanced</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           content-menu--open"
    style="display: block">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/rolling-upgrades/" >
        <span class="block   content-menu__item__right-border">Rolling Upgrades</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item  content-menu__item--selected ">

      <a class="block overflow   content-menu__link--depth-2" >
        <span class="block   content-menu__item__right-border">Monitoring &amp; Metrics</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/appendices/riak-cs-control/" >
        <span class="block   content-menu__item__right-border">Riak CS Control</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/supercluster/" >
        <span class="block   content-menu__item__right-border">Riak CS Supercluster Support</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--beaker">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/theory/" >
              <span class="block   content-menu__item__right-border"><strong>Theory &amp; Concepts</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/theory/stanchion/" >
        <span class="block   content-menu__item__right-border">Stanchion</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/multipart-upload-overview/" >
        <span class="block   content-menu__item__right-border">Multipart Upload Overview</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/garbage-collection/" >
        <span class="block   content-menu__item__right-border">Garbage Collection</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">
      <span class="block float-right   content-menu__menu-toggle
                  ">
      </span>

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/theory/comparisons/" >
        <span class="block   content-menu__item__right-border">Comparisons</span>
      </a>

    </div>
    
    


<ul class="content-menu
           content-menu--depth-2
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/appendices/comparisons/swift/" >
        <span class="block   content-menu__item__right-border">Riak CS Compared To Swift</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-2"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/references/appendices/comparisons/atmos/" >
        <span class="block   content-menu__item__right-border">Riak CS Compared To Atmos</span>
      </a>

    </div>

  </li>



</ul>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--references">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/reference/" >
              <span class="block   content-menu__item__right-border"><strong>Reference</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/faqs/riak-cs/" >
        <span class="block   content-menu__item__right-border">FAQs</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/version-compatibility/" >
        <span class="block   content-menu__item__right-border">Version Compatibility</span>
      </a>

    </div>

  </li>



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/release-notes/" >
        <span class="block   content-menu__item__right-border">Riak CS Release Notes</span>
      </a>

    </div>

  </li>



</ul>

        </li>


        <li >

          <div class="content-menu__item ">

            <span class="block float-left   content-menu__icon-container   docs-icon--cloud">|</span>
            <span class="block float-right   content-menu__menu-toggle
                        ">
            </span>

            <a class="block overflow   content-menu__link--depth-0"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/multi-datacenter-overview/" >
              <span class="block   content-menu__item__right-border"><strong>Riak CS Enterprise</strong></span>
            </a>

          </div>
          
          


<ul class="content-menu
           content-menu--depth-1
           "
    style="display: none">



  <li>

    <div class="content-menu__item ">

      <a class="block overflow   content-menu__link--depth-1"  href="//evadne.github.io/basho_docs/riak/cs/2.1.0/cookbooks/configuration/multi-datacenter/" >
        <span class="block   content-menu__item__right-border">Configuring</span>
      </a>

    </div>

  </li>



</ul>

        </li>

        <li class="content-menu__blank-entry"></li>

      </ul>

    </div>



    <div class="content-nav__fixed-bottom">

      <ul class="content-menu">

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--comments">|</span>

            <a class="block overflow" href="//evadne.github.io/basho_docs/community">
              <span class="block   content-menu__item__right-border">
                <sub>Want some extra help?</sub><br>
                <strong>Ask our Community</strong>
              </span>
            </a>

          </div>
        </li>

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--question-sign">|</span>

            <a class="block overflow" href="http://basho.com/contact">
              <span class="block   content-menu__item__right-border">
                <sub>Need to chat?</sub><br>
                <strong>Contact us directly</strong>
              </span>
            </a>

          </div>
        </li>

        <li>
          <div class="content-menu__item">

            <span class="block float-left   content-menu__icon-container   docs-icon--github-alt">|</span>

            <a class="block overflow" href="https://github.com/basho/basho_docs/edit/master/content/riak/cs/2.1.0/cookbooks/monitoring-and-metrics.md">
              <span class="block   content-menu__item__right-border">
                <sub>Noticed a typo?</sub><br>
                <strong>Correct it in GitHub</strong>
              </span>
            </a>

          </div>
        </li>

      </ul>

    </div>

  </div>
  </div>
  </div>



</nav>

<script>
  (function() {
    var cx = '011972015458788978446:zgdcy4fa-o0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div style="width:0px;overflow:hidden;height:0px;">
  <gcse:search></gcse:search>
</div>






  <div class="content-well">


    <article class="main-article">


      

<header class="front-matter">


  <h1 class="front-matter__title">

    
    <br>
    Monitoring and Metrics

  </h1>
  <nav class="table-of-contents"></nav>


</header>


      <main>
        

<p>Riak S2 (CS) includes metrics and operational statistics to help you monitor your system in more detail and diagnose system issues more easily. There are three major categories of metrics:</p>

<ol>
<li>Frontend API performance</li>
<li>Backend Riak performance (Stanchion)</li>
<li>S2 internal performance</li>
</ol>

<p>Metrics are also available for Stanchion, in addition to the Stanchion-specific <code>stanchion-admin</code> command and <code>/stats</code> HTTP endpoint.</p>

<p>provides operational statistics that can be useful for
monitoring through the Folsom statistics library, and initial probes for
analysis of the running system with
<a href="http://dtrace.org/blogs/about/">DTrace</a>.</p>

<blockquote>
<p><strong>Note: Older Versions of Riak S2</strong></p>

<p>All statistics available in versions of Riak S2 below 2.0.x have either been renamed or removed entirely.</p>
</blockquote>

<h2 id="using-metrics">Using Metrics</h2>

<p>Riak S2 exposes statistics on critical operations that
are commonly used for monitoring, alerting, and trend analysis. These
statistics can be accessed through the command line:</p>

<pre><code class="language-bash">riak-cs-admin status
</code></pre>

<p>or through HTTP requests to the following resource:</p>

<pre><code class="language-http">/riak-cs/stats
</code></pre>

<blockquote>
<p><strong>Note</strong></p>

<p>In order to access statistics from the <code>/stats</code> endpoint, you
must issue signed requests containing the admin user&rsquo;s access key and
secret key. The interface used by Riak S2 is directly analogous to that
of Amazon S3. For more information on signed requests, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html">Amazon&rsquo;s
documentation</a>.</p>

<p>Unsigned requests will yield a <code>403 Forbidden</code> error.</p>
</blockquote>

<h2 id="riak-cs-admin-status"><code>riak-cs-admin status</code></h2>

<p>Running <code>riak-cs-admin status</code> will show the names and values of all available metrics.</p>

<p>There are too many metrics (over 1000) to list all of them here. The following sections provide an overview of each major statistic category, associated prefixes, and major operations for that category.</p>

<h3 id="s3-api-statistics">S3 API statistics</h3>

<p>S3 API statistics start with one of the following prefixes (all of which are names for S3 APIs):</p>

<ul>
<li><code>service</code></li>
<li><code>bucket</code></li>
<li><code>list</code></li>
<li><code>multiple_delete</code></li>
<li><code>object</code></li>
<li><code>multipart</code></li>
</ul>

<p>Each prefix is typically followed by operations such as:</p>

<ul>
<li><code>put</code></li>
<li><code>get</code></li>
<li><code>delete</code></li>
</ul>

<table>
<thead>
<tr>
<th align="left">Operation</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>service_get</code></td>
<td align="left">GET Service</td>
</tr>

<tr>
<td align="left"><code>bucket_(put∣head∣delete)</code></td>
<td align="left">PUT, HEAD, DELETE Bucket</td>
</tr>

<tr>
<td align="left"><code>bucket_acl_(get∣put)</code></td>
<td align="left">PUT, GET Bucket ACL</td>
</tr>

<tr>
<td align="left"><code>bucket_policy_(get∣put∣delete)</code></td>
<td align="left">PUT, GET, DELETE Bucket Policy</td>
</tr>

<tr>
<td align="left"><code>bucket_location_get</code></td>
<td align="left">GET Bucket Location</td>
</tr>

<tr>
<td align="left"><code>list_uploads</code></td>
<td align="left">listing all multipart uploads</td>
</tr>

<tr>
<td align="left"><code>multiple_delete</code></td>
<td align="left">Delete Multiple Objects</td>
</tr>

<tr>
<td align="left"><code>list_objects</code></td>
<td align="left">listing all objects in a bucket, equally GET Bucket</td>
</tr>

<tr>
<td align="left"><code>object_(get∣put∣delete)</code></td>
<td align="left">GET, PUT, DELETE, HEAD Objects</td>
</tr>

<tr>
<td align="left"><code>object_put_copy</code></td>
<td align="left">PUT Copy Object</td>
</tr>

<tr>
<td align="left"><code>object_acl</code></td>
<td align="left">GET, PUT Object ACL</td>
</tr>

<tr>
<td align="left"><code>multipart_post</code></td>
<td align="left">Initiate a multipart upload</td>
</tr>

<tr>
<td align="left"><code>multipart_upload_put</code></td>
<td align="left">PUT Multipart Upload, putting a part of an object by copying from existing object</td>
</tr>

<tr>
<td align="left"><code>multipart_upload_post</code></td>
<td align="left">complete a multipart upload</td>
</tr>

<tr>
<td align="left"><code>multipart_upload_delete</code></td>
<td align="left">delete a part of a multipart upload</td>
</tr>

<tr>
<td align="left"><code>multipart_upload_get</code></td>
<td align="left">get a list of parts in a multipart upload</td>
</tr>
</tbody>
</table>

<p>See the <a href="http://docs.basho.com/riakcs/latest/references/apis/storage/s3/">S3 API documentation</a> for information on all available APIs.</p>

<h3 id="stanchion-access-statistics">Stanchion access statistics</h3>

<p>Stanchion access statistics start with the prefix <code>velvet</code>.</p>

<p>These statistics cover latency and counts for the Stanchion process creating/updating/deleting buckets or creating users. Stanchion access statistics can help determine if latency or slow requests are in Stanchion.</p>

<table>
<thead>
<tr>
<th align="left">Operation</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>velvet_create_user</code></td>
<td align="left">requesting creating a user to Stanchion</td>
</tr>

<tr>
<td align="left"><code>velvet_update_user</code></td>
<td align="left">requesting updating a user to Stanchion</td>
</tr>

<tr>
<td align="left"><code>velvet_create_bucket</code></td>
<td align="left">requesting creating a bucket to Stanchion</td>
</tr>

<tr>
<td align="left"><code>velvet_delete_bucket</code></td>
<td align="left">requesting deleting a bucket to Stanchion</td>
</tr>

<tr>
<td align="left"><code>velvet_set_bucket_acl</code></td>
<td align="left">requesting updating a bucket ACL to Stanchion</td>
</tr>

<tr>
<td align="left"><code>velvet_set_bucket_policy</code></td>
<td align="left">requesting putting a new bucket policy to Stanchion</td>
</tr>

<tr>
<td align="left"><code>velvet_delete_bucket_policy</code></td>
<td align="left">requesting deleting a policy of the bucket to Stanchion</td>
</tr>
</tbody>
</table>

<h3 id="riak-access-statistics">Riak access statistics</h3>

<p>Riak access statistics start with the prefix <code>riakc</code>.</p>

<p>These statistics cover latency and call counts to Riak PB API. Riak access statistics are useful in determining the source of latency. For example getting a user record, bucket record, or updating manifests.</p>

<p>The <code>riakc</code> prefix is typically followed by operations like:</p>

<ul>
<li><code>put</code></li>
<li><code>get</code></li>
</ul>

<p>And their targets, such as manifests or blocks.</p>

<table>
<thead>
<tr>
<th align="left">Operation</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>riakc_ping</code></td>
<td align="left">ping PB API. invoked by /riak-cs/ping</td>
</tr>

<tr>
<td align="left"><code>riakc_get_cs_bucket</code></td>
<td align="left">getting a bucket record</td>
</tr>

<tr>
<td align="left"><code>riakc_get_cs_user_strong</code></td>
<td align="left">getting a user record with PR=all</td>
</tr>

<tr>
<td align="left"><code>riakc_get_cs_user</code></td>
<td align="left">getting a user record with R=quorum and PR=one</td>
</tr>

<tr>
<td align="left"><code>riakc_put_cs_user</code></td>
<td align="left">putting a user record after create/deleting a bucket</td>
</tr>

<tr>
<td align="left"><code>riakc_get_manifest</code></td>
<td align="left">getting a manifest</td>
</tr>

<tr>
<td align="left"><code>riakc_put_manifest</code></td>
<td align="left">putting a manifest</td>
</tr>

<tr>
<td align="left"><code>riakc_delete_manifest</code></td>
<td align="left">deleting a manifest (invoked via GC)</td>
</tr>

<tr>
<td align="left"><code>riakc_get_block_n_one</code></td>
<td align="left">getting a block with N=1 without sloppy quorum</td>
</tr>

<tr>
<td align="left"><code>riakc_get_block_n_all</code></td>
<td align="left">getting a block with N=3 after N=1 get failed</td>
</tr>

<tr>
<td align="left"><code>riakc_get_block_remote</code></td>
<td align="left">getting a block after N=3 get resulted in not found</td>
</tr>

<tr>
<td align="left"><code>riakc_get_block_legacy</code></td>
<td align="left">getting a block when N=1 get is turned off</td>
</tr>

<tr>
<td align="left"><code>riakc_put_block</code></td>
<td align="left">putting a block</td>
</tr>

<tr>
<td align="left"><code>riakc_put_block_resolved</code></td>
<td align="left">putting a block when block siblings resolution is invoked</td>
</tr>

<tr>
<td align="left"><code>riakc_head_block</code></td>
<td align="left">heading a block, invoked via GC</td>
</tr>

<tr>
<td align="left"><code>riakc_delete_block_constrained</code></td>
<td align="left">first trial to delete block with PW=all</td>
</tr>

<tr>
<td align="left"><code>riakc_delete_block_secondary</code></td>
<td align="left">second trial to delete block with PW=quorum, after PW=all failed</td>
</tr>

<tr>
<td align="left"><code>riakc_(get∣put)_gc_manifest_set</code></td>
<td align="left">invoked when a manifest is being moved to GC bucket</td>
</tr>

<tr>
<td align="left"><code>riakc_(get∣delete)_gc_manifest_set</code></td>
<td align="left">invoked when manifests are being collected</td>
</tr>

<tr>
<td align="left"><code>riakc_(get∣put)_access</code></td>
<td align="left">getting access stats, putting access stats</td>
</tr>

<tr>
<td align="left"><code>riakc_(get∣put)_storage</code></td>
<td align="left">getting storage stats, putting storage stats</td>
</tr>

<tr>
<td align="left"><code>riakc_fold_manifest_objs</code></td>
<td align="left">invoked inside GET Bucket (listing objects within a bucket)</td>
</tr>

<tr>
<td align="left"><code>riakc_mapred_storage</code></td>
<td align="left">stats on each MapReduce job performance</td>
</tr>

<tr>
<td align="left"><code>riakc_list_all_user_keys</code></td>
<td align="left">all users are listed out when starting storage calculation</td>
</tr>

<tr>
<td align="left"><code>riakc_list_all_manifest_keys</code></td>
<td align="left">only used when deleting a bucket to verify it&rsquo;s empty</td>
</tr>

<tr>
<td align="left"><code>riakc_list_users_receive_chunk</code></td>
<td align="left">listing users invoked via /riak-cs/users API.</td>
</tr>

<tr>
<td align="left"><code>riakc_get_uploads_by_index</code></td>
<td align="left"></td>
</tr>

<tr>
<td align="left"><code>riakc_get_user_by_index</code></td>
<td align="left"></td>
</tr>

<tr>
<td align="left"><code>riakc_get_gc_keys_by_index</code></td>
<td align="left"></td>
</tr>

<tr>
<td align="left"><code>riakc_get_cs_buckets_by_index</code></td>
<td align="left"></td>
</tr>

<tr>
<td align="left"><code>riakc_get_clusterid</code></td>
<td align="left">invoked when for the first time when a proxy_get is performed</td>
</tr>
</tbody>
</table>

<h2 id="riak-cs-stats"><code>/riak-cs/stats</code></h2>

<p>That will return a JSON object containing a series of latency histograms
and counters for a variety of operations, e.g. <code>object_get</code> and
<code>block_put</code>. Alongside each operation there will be a list showing the
count and rate for the operation, as well as a latency histogram showing
mean, median, and 95th and 99th percentiles:</p>

<pre><code class="language-json">&lt;operation_name&gt;: [MeterCount, MeterRate, LatencyMean, LatencyMedian, Latency95, Latency99]
</code></pre>

<p>You will see a list of that form for each of the following operations:</p>

<table>
<thead>
<tr>
<th align="left">Operation</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>block_get</code></td>
<td align="left">Total BLOCK GET operations performed</td>
</tr>

<tr>
<td align="left"><code>block_put</code></td>
<td align="left">Total BLOCK GET operations performed</td>
</tr>

<tr>
<td align="left"><code>block_delete</code></td>
<td align="left">Total BLOCK DELETE operations performed</td>
</tr>

<tr>
<td align="left"><code>service_get_buckets</code></td>
<td align="left">Total GET BUCKETS operations performed</td>
</tr>

<tr>
<td align="left"><code>bucket_list_keys</code></td>
<td align="left">Total BUCKET LIST KEYS operations performed</td>
</tr>

<tr>
<td align="left"><code>bucket_create</code></td>
<td align="left">Total BUCKET CREATE operations performed</td>
</tr>

<tr>
<td align="left"><code>bucket_delete</code></td>
<td align="left">Total BUCKET DELETE operations performed</td>
</tr>

<tr>
<td align="left"><code>bucket_get_acl</code></td>
<td align="left">Total BUCKET GET ACL operations performed</td>
</tr>

<tr>
<td align="left"><code>bucket_put_acl</code></td>
<td align="left">Total BUCKET PUT ACL operations performed</td>
</tr>

<tr>
<td align="left"><code>object_get</code></td>
<td align="left">Total GET operations performed</td>
</tr>

<tr>
<td align="left"><code>object_put</code></td>
<td align="left">Total PUT operations performed</td>
</tr>

<tr>
<td align="left"><code>object_head</code></td>
<td align="left">Total OBJECT HEAD operations performed</td>
</tr>

<tr>
<td align="left"><code>object_delete</code></td>
<td align="left">Total OBJECT DELETE operations performed</td>
</tr>

<tr>
<td align="left"><code>object_get_acl</code></td>
<td align="left">Total OBJECT GET ACL operations performed</td>
</tr>

<tr>
<td align="left"><code>object_put_acl</code></td>
<td align="left">Total OBJECT PUT ACL operations performed</td>
</tr>
</tbody>
</table>

<h2 id="stanchion">Stanchion</h2>

<h2 id="dtrace-probes">DTrace Probes</h2>

<p>Riak CS is built with some probes for use with
<a href="http://dtrace.org/blogs/about/">DTrace</a> to inspect certain operations
in the live system, which can be helpful in diagnosing issues.</p>

<h3 id="usage-examples">Usage Examples</h3>

<p>The following are examples of using DTrace for inspecting various
components of a running Riak CS installation.</p>

<h4 id="trace-user-object-requests">Trace User Object Requests</h4>

<pre><code class="language-bash">dtrace -qn 'erlang*:::user_trace* /arg2 == 703/ {printf(&quot;pid %s: mod %s op %s: user %s bucket/file %s\n&quot;, copyinstr(arg0), copyinstr(arg6), copyinstr(arg7), copyinstr(arg8), copyinstr(arg9));}'
</code></pre>

<h4 id="trace-webmachine-resource-execution">Trace Webmachine Resource Execution</h4>

<pre><code class="language-bash">dtrace -qn 'erlang*:::user_trace* /arg2 == 705/ {printf(&quot;pid %s: %s:%s\n&quot;, copyinstr(arg0), copyinstr(arg6), copyinstr(arg7));}'
</code></pre>

<div class="blocknote">
  
    <div class="blocknote__title">Note on DTrace Support</div>
  
  <p>Work on packaging of Riak CS for SmartOS and other operating systems with
DTrace support is ongoing with the goal of providing enhanced ability to
diagnose low-level issues in instances of Riak CS running on such operating
systems.</p>

</div>


      </main>


    </article>


    <footer class="footer">

  <div class="inline-block   footer__attributions">

    <p>
      This work is licensed under a
      <br class="[bs] hidden-md-up">
      <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        Creative Commons Attribution 4.0 <br class="[bs] hidden-sm-up"> International Public License
      </a>
    </p>

    <p>
      © 2011-2017&nbsp;<a href="http://www.basho.com">Basho Technologies, Inc.</a>
    </p>

  </div>

</footer>



  </div>


  <script src="//evadne.github.io/basho_docs/js/main.js" type="text/javascript"></script>

</body>
</html>
